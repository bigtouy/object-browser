(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[88],{649:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var s=n(6797),o=n.n(s),i=n(3097),r=n.n(i),a=n(6483),l=n(4710);const d=new class{invoke(e,t,n,s){let i=t;"/"===i[0]&&(i=i.slice(1));let r=o()(e,i);if(s)for(let o in s)r.set(o,s[o]);return r.send(n).then((e=>e.body)).catch((e=>401===e.status&&localStorage.getItem("userLoggedIn")&&!i.includes("api/v1/login")?("/"!==window.location.pathname&&localStorage.setItem("redirect-path",window.location.pathname),(0,a.q7)(),void(window.location.href=`${l.p}login`)):this.onError(e)))}onError(e){if(e.status){const t=r()(e.response,"body.message",`Error ${e.status.toString()}`);let n=r()(e.response,"body.detailedMessage","");t===n&&(n="");const s={errorMessage:t.charAt(0).toUpperCase()+t.slice(1),detailedError:n.charAt(0).toUpperCase()+n.slice(1),statusCode:e.status};return Promise.reject(s)}(0,a.q7)(),window.location.href=`${l.p}login`}}},6483:(e,t,n)=>{"use strict";n.d(t,{K7:()=>u,Tw:()=>j,eQ:()=>m,nO:()=>l,oK:()=>x,q7:()=>h,qO:()=>d,qf:()=>p});var s=n(9816),o=n(3097),i=n.n(o);const r=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],a=["Ki","Mi","Gi","Ti","Pi","Ei"],l=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=parseInt(e,10)||0;return d(n,t)},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0;for(;e>=1024&&++n;)e/=1024;const s=["B",...a];return e.toFixed(1)+" "+(t?s[n]:r[n])},c=e=>{document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"},h=()=>{s.Ay.removeItem("token"),s.Ay.removeItem("auth-state"),c("token"),c("idp-refresh-token")},u=e=>{const t=Math.floor(e/86400),n=Math.floor(e%86400/3600),s=Math.floor(e%3600/60),o=e%60,i=[];return t>0&&i.push(`${t} day${1!==t?"s":""}`),n>0&&i.push(`${n} hour${1!==n?"s":""}`),s>0&&i.push(`${s} minute${1!==s?"s":""}`),o>0&&i.push(`${o} second${1!==o?"s":""}`),i.join(" and ")},m=function(e){switch(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"s"){case"ns":e=Math.floor(1e-9*e);break;case"ms":e=Math.floor(.001*e)}const t=Math.floor(e/86400);e-=3600*t*24;const n=Math.floor(e/3600);e-=3600*n;const s=Math.floor(e/60);if(e-=60*s,t>365){const e=t/365;return`${e} year${1===Math.floor(e)?"":"s"}`}if(t>30){const e=Math.floor(t/30),n=t-30*e;return`${e} month${1===Math.floor(e)?"":"s"} ${n>0?`${n} day${n>1?"s":""}`:""}`}if(t>=7&&t<=30){const e=Math.floor(t/7);return`${Math.floor(e)} week${1===e?"":"s"}`}return t>=1&&t<=6?`${t} day${t>1?"s":""}`:`${n>=1?`${n} hour${n>1?"s":""}`:""} ${s>=1&&0===n?`${s} minute${s>1?"s":""}`:""} ${e>=1&&0===s&&0===n?`${e} second${e>1?"s":""}`:""}`},x=()=>{const e=i()(window.navigator,"platform","undefined");return e||"undefined"},p=e=>e.split("\u202e").join("<\ufffd202e>"),j=e=>{try{return decodeURIComponent(e)}catch(t){return e}}},3263:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Be});var s=n(5043),o=n(2166),i=n(3216),r=n(6629),a=n(3635),l=n(9161),d=n(6035),c=n(4978),h=n(3097),u=n.n(h),m=n(9923),x=n(3518),p=n(8789),j=n(28),g=n(6483),b=n(1476),f=n.n(b),v=n(4574),S=n(5475),_=n(7938),w=n(579);const y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){return(0,w.jsx)(s.Suspense,{fallback:t,children:(0,w.jsx)(e,{...n})})}};var O=n(4159);const C=e=>(e.match(/\.([^.]*?)(?=\?|#|$)/)||[])[1],T=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const s=Object.keys(e).reduce(((n,s)=>(C(s)&&s.includes(t)&&(n[s]=e[s]),n)),{});return Object.keys(s).filter((e=>{const o=s[e].some((e=>n.find((t=>{let n=!1;if(-1!==t.indexOf("*")){const s=t.substring(0,t.length-1);n=e.includes(s)}return n||e===t})))),i=e.substring(0,e.indexOf("/*."));return o&&(i===`arn:aws:s3:::${t}`&&"arn:aws:s3:::*"!==e)}))},E=y(s.lazy((()=>n.e(774).then(n.bind(n,7774))))),I=v.Ay.div((()=>({display:"flex","& .additionalOptions":{paddingRight:"10px",display:"flex",alignItems:"center",[`@media (max-width: ${m.nmC.lg}px)`]:{display:"none"}},"& .slashSpacingStyle":{margin:"0 5px"}}))),k=e=>{let{bucketName:t,internalPaths:n,hidePathButton:r,additionalOptions:h}=e;const u=(0,a.j)(),x=(0,i.Zp)(),p=(0,o.d4)((e=>e.objectBrowser.rewind.rewindEnabled)),j=(0,o.d4)((e=>e.objectBrowser.versionsMode)),b=(0,o.d4)((e=>e.objectBrowser.versionedFile)),v=(0,o.d4)((e=>e.system.anonymousMode)),[y,C]=(0,s.useState)(!1),[k,A]=(0,s.useState)(!1),N=[l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],B=(0,o.d4)((e=>e.console.session&&e.console.session.permissions||{}));let F=n;""!==n&&(F=`/${n}`);const $=F.split("/").filter((e=>""!==e)),V=$.length-1,D=t+F||t,L=T(B,D,N);(0,s.useEffect)((()=>{A(!1),Object.keys(B).forEach((e=>{e.includes(D)&&e.includes("/*")&&A(!0)}))}),[D,n,B]);const P=(0,_._)([D,...L],N)||v||k;let R=$.map(((e,n)=>{const o=`${$.slice(0,n+1).join("/")}/`,i=`/browser/${encodeURIComponent(t)}/${o?`${encodeURIComponent(o)}`:""}`;return n===V&&e===b?null:(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)("span",{className:"slashSpacingStyle",children:"/"}),n===V?(0,w.jsx)("span",{style:{cursor:"default",whiteSpace:"pre"},children:(0,g.Tw)(e)}):(0,w.jsx)(S.N_,{style:{whiteSpace:"pre"},to:i,onClick:()=>{u((0,d.cQ)({status:!1,objectName:""}))},children:(0,g.Tw)(e)})]},`breadcrumbs-${n.toString()}`)})),z=[];j&&(z=[(0,w.jsx)(s.Fragment,{children:(0,w.jsxs)("span",{children:[(0,w.jsx)("span",{className:"slashSpacingStyle",children:"/"}),b,(0,c.t)("- Versions")]})},(0,c.t)("breadcrumbs-versionedItem"))]);const U=[(0,w.jsx)(s.Fragment,{children:(0,w.jsx)(S.N_,{to:`/browser/${t}`,onClick:()=>{u((0,d.cQ)({status:!1,objectName:""}))},children:t})},(0,c.t)("breadcrumbs-root-path")),...R,...z];return(0,w.jsxs)(s.Fragment,{children:[(0,w.jsxs)(I,{children:[y&&(0,w.jsx)(E,{modalOpen:y,bucketName:t,folderName:n,onClose:()=>{C(!1)},limitedSubPath:k&&!((0,_._)([D,...L],N)||v)}),(0,w.jsx)(m.BIu,{sx:{whiteSpace:"pre"},goBackFunction:()=>{if(j)u((0,d.cQ)({status:!1,objectName:""}));else{if(0===$.length)return;const e=$.slice(0,-1);x(`/browser/${t}${e.length>0?`/${encodeURIComponent(`${e.join("/")}/`)}`:""}`)}},additionalOptions:(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)(f(),{text:`${t}/${$.join("/")}`,children:(0,w.jsx)(m.$nd,{id:"copy-path",icon:(0,w.jsx)(m.TdU,{style:{width:"12px",height:"12px",fill:"#969FA8",marginTop:-1}}),variant:"regular",onClick:()=>{u((0,O.Hk)("Path copied to clipboard"))},style:{width:"28px",height:"28px",color:"#969FA8",border:"#969FA8 1px solid",marginRight:5}})}),(0,w.jsx)(m.azJ,{className:"additionalOptions",children:h})]}),children:U}),!r&&(0,w.jsx)(m.m_M,{tooltip:P?"Choose or create a new path":(0,l.vj)([l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],"create a new path"),children:(0,w.jsx)(m.$nd,{id:"new-path",onClick:()=>{C(!0)},disabled:!v&&(p||!P),icon:(0,w.jsx)(m.pj3,{style:{fill:"#969FA8"}}),style:{whiteSpace:"nowrap"},variant:"regular",label:(0,c.t)("Create new path")})})]}),(0,w.jsx)(m.azJ,{sx:{display:"none",marginTop:15,marginBottom:5,justifyContent:"flex-start","& > div":{fontSize:12,fontWeight:"normal",flexDirection:"row",flexWrap:"nowrap"},[`@media (max-width: ${m.nmC.lg}px)`]:{display:"flex"}},children:h})]})};var A=n(3445);const N=e=>"Enabled"===e||"Suspended"===e;var B=n(7414),F=n(9947),$=n(1708),V=n(6681);const D=e=>{let{uploadPath:t,bucketName:n,forceDisable:i=!1,uploadFileFunction:r,uploadFolderFunction:a,overrideStyles:d={}}=e;const[h,u]=(0,s.useState)(null),[x,p]=(0,s.useState)(!1),j=(0,o.d4)((e=>e.system.anonymousMode)),g=(0,o.d4)((e=>e.console.session&&e.console.session.permissions||{})),b=[l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],f=T(g,t,b),v=Boolean(h),S=()=>{u(null)},y=(0,_._)([t,...f],b)||j,O=(0,_._)([n,...f],b,!1,!0),C=y||O;return(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)(V.A,{tooltip:C?"Upload Files":(0,l.vj)([l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],"upload files to this bucket"),children:(0,w.jsx)(m.$nd,{id:"upload-main","aria-controls":(0,c.t)("upload-main-menu"),"aria-haspopup":"true","aria-expanded":v?"true":void 0,onClick:e=>{p(!x),u(e.currentTarget)},label:(0,c.t)("Upload"),icon:(0,w.jsx)(m.JMY,{}),variant:"callAction",disabled:i||!C,sx:d})}),(0,w.jsx)(m.Vey,{id:"upload-main-menu",options:[{label:"Upload File",icon:(0,w.jsx)(m.JMY,{}),value:"file",disabled:!y||i},{label:"Upload Folder",icon:(0,w.jsx)(m.nDF,{}),value:"folder",disabled:!O||i}],selectedOption:"",onSelect:e=>{"folder"!==e?r(S):a(S)},hideTriggerAction:()=>{p(!1)},open:x,anchorEl:h,anchorOrigin:"end",useAnchorWidth:!0})]})},L=e=>{let{open:t,closePanel:n,className:s="",children:o}=e;return(0,w.jsxs)(m.azJ,{id:"details-panel",sx:{borderColor:"#EAEDEE",borderWidth:0,borderStyle:"solid",borderRadius:3,borderBottomLeftRadius:0,borderBottomRightRadius:0,width:0,transitionDuration:"0.3s",overflowX:"hidden",overflowY:"auto",position:"relative",opacity:0,marginLeft:-1,"&.open":{width:300,minWidth:300,borderLeftWidth:1,opacity:1},"@media (max-width: 799px)":{"&.open":{width:"100%",minWidth:"100%",borderLeftWidth:0}}},className:`${t?"open":""} ${s}`,children:[(0,w.jsx)(m.$nd,{variant:"text",id:"close-details-list",onClick:n,icon:(0,w.jsx)(m._FR,{}),sx:{position:"absolute",right:5,top:18,padding:0,height:14,"&:hover:not(:disabled)":{backgroundColor:"transparent"}}}),o]})};var P=n(8245);const R=e=>{let{icon:t,strings:n}=e;return(0,w.jsxs)(m.azJ,{sx:{display:"flex",alignItems:"center","& .min-icon":{width:16,height:16,marginRight:4,minWidth:16,minHeight:16},"& .fileNameText":{whiteSpace:"pre",overflow:"hidden",textOverflow:"ellipsis"}},children:[t,(0,w.jsx)("span",{className:"fileNameText",children:(0,g.qf)(n[n.length-1])})]})},z=[{icon:(0,w.jsx)(m.FRZ,{}),extensions:["mp4","mov","avi","mpeg","mpg"]},{icon:(0,w.jsx)(m.jCy,{}),extensions:["mp3","m4a","aac"]},{icon:(0,w.jsx)(m.yTC,{}),extensions:["pdf"]},{icon:(0,w.jsx)(m.QvW,{}),extensions:["ppt","pptx"]},{icon:(0,w.jsx)(m.z9t,{}),extensions:["xls","xlsx"]},{icon:(0,w.jsx)(m.VSs,{}),extensions:["cer","crt","pem"]},{icon:(0,w.jsx)(m.bM2,{}),extensions:["html","xml","css","py","go","php","cpp","h","java"]},{icon:(0,w.jsx)(m.qM2,{}),extensions:["cfg","yaml"]},{icon:(0,w.jsx)(m.ITz,{}),extensions:["sql"]},{icon:(0,w.jsx)(m.PcO,{}),extensions:["ttf","otf"]},{icon:(0,w.jsx)(m.yEV,{}),extensions:["doc","docx","txt","rtf"]},{icon:(0,w.jsx)(m.j_m,{}),extensions:["zip","rar","tar","gz"]},{icon:(0,w.jsx)(m.DUd,{}),extensions:["epub","mobi","azw","azw3"]},{icon:(0,w.jsx)(m.nLN,{}),extensions:["jpeg","jpg","gif","tiff","png","heic","dng"]}],U=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e,s=(0,w.jsx)(m.KlI,{});e.endsWith("/")&&(s=(0,w.jsx)(m.kez,{}),n=e.slice(0,-1));const o=e.toLowerCase();for(const r of z)for(const e of r.extensions)o.endsWith(`.${e}`)&&(s=r.icon);!e.endsWith("/")&&e.indexOf(".")<0&&(s=(0,w.jsx)(m.YJK,{}));const i=n.split("/");return t?s:(0,w.jsx)(R,{icon:s,strings:i})};var M=n(7524);const G=e=>{let{metaData:t}=e;const n=Object.keys(t);return(0,w.jsx)(s.Fragment,{children:n.map(((e,n)=>{const s=(e=>Array.isArray(e)?e.map(g.Tw).join(", "):(0,g.Tw)(e))(t[e]);return(0,w.jsxs)(m.azJ,{sx:{marginBottom:15,fontSize:14,maxHeight:180,overflowY:"auto"},children:[(0,w.jsx)("strong",{children:e}),(0,w.jsx)("br",{}),s]},`box-meta-${e}-${n.toString()}`)}))})};var J=n(718),W=n(8661),K=n(5448);const H=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,selectedBucket:i,selectedObject:r,versioningInfo:d,selectedVersion:h=""}=e;const u=(0,a.j)(),[x,p]=(0,K.A)((()=>t(!0)),(e=>{u((0,O.C9)(e)),"Access Denied."===e.detailedError&&t(!0)})),[j,g]=(0,s.useState)(!1),[b,f]=(0,s.useState)(!1),v=(0,o.d4)((e=>e.objectBrowser.retentionConfig)),S=(0,_._)([i],[l.OV.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===v||void 0===v?void 0:v.mode);if(!r)return null;return(0,w.jsx)(W.A,{title:(0,c.t)("Delete Object"),confirmText:"Delete",isOpen:n,titleIcon:(0,w.jsx)(m.xWY,{}),isLoading:x,onConfirm:()=>{const e=r.endsWith("/");p("DELETE",`/api/v1/buckets/${encodeURIComponent(i)}/objects?prefix=${encodeURIComponent(r)}${""!==h?`&version_id=${encodeURIComponent(h)}`:`&recursive=${e}&all_versions=${j}`}${b?"&bypass=true":""}`)},onClose:()=>t(!1),confirmationContent:(0,w.jsxs)(s.Fragment,{children:[(0,c.t)("Are you sure you want to delete:"),(0,w.jsx)("br",{}),(0,w.jsx)("b",{children:r})," ",""!==h?(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)("br",{}),(0,w.jsx)("br",{}),(0,c.t)("Version ID:"),(0,w.jsx)("br",{}),(0,w.jsx)("strong",{children:h})]}):"","? ",(0,w.jsx)("br",{}),(0,w.jsx)("br",{}),N(null===d||void 0===d?void 0:d.status)&&""===h&&(0,w.jsx)(s.Fragment,{children:(0,w.jsx)(m.dOG,{label:(0,c.t)("Delete All Versions"),indicatorLabels:["Yes","No"],checked:j,value:"delete_versions",id:"delete-versions",name:"delete-versions",onChange:e=>{g(!j)},description:""})}),S&&(j||""!==h)&&(0,w.jsx)(s.Fragment,{children:(0,w.jsx)("div",{style:{marginTop:10},children:(0,w.jsx)(m.dOG,{label:(0,c.t)("Bypass Governance Mode"),indicatorLabels:["Yes","No"],checked:b,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:e=>{f(!b)},description:""})})}),j&&(0,w.jsxs)(s.Fragment,{children:[(0,w.jsxs)("div",{style:{marginTop:10,border:"#c83b51 1px solid",borderRadius:3,padding:5,backgroundColor:"#c83b5120",color:"#c83b51"},children:[(0,c.t)("This will remove the object as well as all of its versions,")," ",(0,w.jsx)("br",{}),(0,c.t)("This action is irreversible.")]}),(0,w.jsx)("br",{}),(0,c.t)("Are you sure you want to continue?")]})]})})};var Y=n(4141),Z=n(7403);const q=v.Ay.b((e=>{let{theme:t}=e;return{color:u()(t,"signalColors.danger","#C83B51"),marginLeft:5}})),Q=e=>{var t;let{modalOpen:n,onCloseAndUpdate:i,bucketName:d,actualInfo:h}=e;const p=(0,a.j)(),j=(0,o.d4)(O.Rq),[g,b]=(0,s.useState)(""),[f,v]=(0,s.useState)(""),[S,y]=(0,s.useState)(!1),[C,T]=(0,s.useState)(!1),[E,I]=(0,s.useState)(""),[k,A]=(0,s.useState)(""),N=h.tags,B=Object.keys(N||{}),F=null===(t=h.name)||void 0===t?void 0:t.split("/"),$=(null===F||void 0===F?void 0:F.pop())||"",V=e=>(0,w.jsxs)(m.azJ,{sx:{fontSize:16,margin:"20px 0 30px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%"},children:[(0,c.t)("Tag"),e?"s":"",(0,c.t)("for:"),(0,w.jsx)("strong",{children:$})]});return(0,w.jsx)(s.Fragment,{children:(0,w.jsx)(Y.A,{modalOpen:n,title:C?"Delete Tag":(0,c.t)("Edit Tags"),onClose:()=>{i(!0)},iconColor:C?"delete":"default",titleIcon:C?(0,w.jsx)(m.aaC,{}):(0,w.jsx)(m.cGQ,{}),children:C?(0,w.jsx)(s.Fragment,{children:(0,w.jsxs)(m.xA9,{container:!0,children:[V(!1),(0,c.t)("Are you sure you want to delete the tag")," ",(0,w.jsxs)(q,{children:[E," : ",k]})," ","?",(0,w.jsxs)(m.xA9,{item:!0,xs:12,sx:Z.U.modalButtonBar,children:[(0,w.jsx)(m.$nd,{id:"cancel",type:"button",variant:"regular",onClick:()=>{I(""),A(""),T(!1)},label:(0,c.t)("Cancel")}),(0,w.jsx)(m.$nd,{type:"submit",variant:"secondary",onClick:()=>{const e={...N};delete e[E];const t=j?h.version_id||"":"null";r.F.buckets.putObjectTags(d,{prefix:h.name||"",version_id:t},{tags:e}).then((()=>{i(!0),y(!1)})).catch((e=>{p((0,O.Dy)((0,x.S)(e.error))),y(!1)}))},id:"deleteTag",label:(0,c.t)("Delete Tag")})]})]})}):(0,w.jsxs)(m.azJ,{children:[(0,w.jsx)(_.R,{scopes:[l.OV.S3_GET_OBJECT_TAGGING,l.OV.S3_GET_ACTIONS],resource:d,children:(0,w.jsxs)(m.azJ,{sx:{display:"flex",flexFlow:"column",width:"100%"},children:[V(!0),(0,w.jsxs)(m.azJ,{sx:{fontSize:14,fontWeight:"normal"},children:[(0,c.t)("Current Tags:"),(0,w.jsx)("br",{}),0===B.length?(0,w.jsx)("span",{className:"muted",children:(0,c.t)("There are no tags for this object")}):(0,w.jsx)(s.Fragment,{}),(0,w.jsx)(m.azJ,{sx:{marginTop:"5px",marginBottom:"15px"},children:B.map(((e,t)=>{const n=u()(N,`${e}`,"");return""!==n?(0,w.jsx)(_.R,{scopes:[l.OV.S3_DELETE_OBJECT_TAGGING,l.OV.S3_DELETE_ACTIONS],resource:d,errorProps:{deleteIcon:null,onDelete:null},children:(0,w.jsx)(m.vwO,{id:`${e} : ${n}`,label:`${e} : ${n}`,variant:"regular",color:"default",onDelete:()=>{((e,t)=>{I(e),A(t),T(!0)})(e,n)}})},`chip-${t}`):null}))})]})]})}),(0,w.jsx)(_.R,{scopes:[l.OV.S3_PUT_OBJECT_TAGGING,l.OV.S3_PUT_ACTIONS],resource:d,errorProps:{disabled:!0,onClick:null},children:(0,w.jsxs)(m.azJ,{children:[(0,w.jsx)(m._xt,{icon:(0,w.jsx)(m.b_$,{}),separator:!1,children:(0,c.t)("Add New Tag")}),(0,w.jsxs)(m.Hbc,{containerPadding:!1,withBorders:!1,children:[(0,w.jsx)(m.cl_,{value:g,label:(0,c.t)("Tag Key"),id:"newTagKey",name:"newTagKey",placeholder:(0,c.t)("Enter Tag Key"),onChange:e=>{b(e.target.value)}}),(0,w.jsx)(m.cl_,{value:f,label:(0,c.t)("Tag Label"),id:"newTagLabel",name:"newTagLabel",placeholder:(0,c.t)("Enter Tag Label"),onChange:e=>{v(e.target.value)}}),(0,w.jsxs)(m.xA9,{item:!0,xs:12,sx:Z.U.modalButtonBar,children:[(0,w.jsx)(m.$nd,{id:"clear",type:"button",variant:"regular",color:"primary",onClick:()=>{v(""),b("")},label:(0,c.t)("Clear")}),(0,w.jsx)(m.$nd,{type:"submit",variant:"callAction",disabled:""===f.trim()||""===g.trim()||S,onClick:()=>{y(!0);const e={};e[g]=f;const t={...N,...e},n=j?h.version_id||"":"null";r.F.buckets.putObjectTags(d,{prefix:h.name||"",version_id:n},{tags:t}).then((()=>{i(!0),y(!1)})).catch((e=>{p((0,O.Dy)((0,x.S)(e.error))),y(!1)}))},id:"saveTag",label:(0,c.t)("Save")})]})]})]})})]})})})},X=e=>{let{open:t,closeModal:n,currentItem:o,internalPaths:i,actualInfo:r,bucketName:l}=e;const d=(0,a.j)(),[h,u]=(0,s.useState)(o),[x,p]=(0,s.useState)(!1);return(0,w.jsxs)(Y.A,{title:(0,c.t)("Rename Download"),modalOpen:t,onClose:n,titleIcon:(0,w.jsx)(m.qUP,{}),children:[(0,w.jsxs)("div",{children:[(0,c.t)("The file you are trying to download has a long name."),(0,w.jsx)("br",{}),(0,c.t)("This can cause issues on Windows Systems by trimming the file name after download."),(0,w.jsx)("br",{}),(0,w.jsx)("br",{}),(0,c.t)("We recommend to rename the file download")]}),(0,w.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{(e=>{e.preventDefault(),(0,P._)(d,l,i,r),n()})(e)},children:(0,w.jsxs)(m.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,w.jsx)(m.cl_,{id:"download-filename",name:"download-filename",onChange:e=>{u(e.target.value)},label:"",type:"text",value:h,error:h.length>200&&!x?"Filename should be less than 200 characters long.":""}),(0,w.jsx)(m.dOG,{value:"acceptLongName",id:"acceptLongName",name:"acceptLongName",checked:x,onChange:e=>{p(e.target.checked),e.target.checked&&u(o)},label:(0,c.t)("Use Original Name")}),(0,w.jsx)(m.xA9,{item:!0,xs:12,sx:Z.U.modalButtonBar,children:(0,w.jsx)(m.$nd,{id:"download-file",type:"submit",variant:"callAction",color:"primary",disabled:h.length>200&&!x,label:(0,c.t)("Download File")})})]})})]})},ee={is_latest:!0,last_modified:"",legal_hold_status:"",name:"",retention_mode:"",retention_until_date:"",size:0,tags:{},version_id:void 0},te=e=>{let{internalPaths:t,bucketName:n,versioningInfo:i,onClosePanel:h}=e;const x=(0,a.j)(),p=(0,o.d4)(O.Rq),j=(0,o.d4)((e=>e.objectBrowser.versionsMode)),b=(0,o.d4)((e=>e.objectBrowser.selectedVersion)),f=(0,o.d4)((e=>e.objectBrowser.loadingObjectInfo)),[v,S]=(0,s.useState)(!1),[y,C]=(0,s.useState)(!1),[T,E]=(0,s.useState)(null),[I,k]=(0,s.useState)([]),[N,B]=(0,s.useState)(null),[F,$]=(0,s.useState)([]),[D,L]=(0,s.useState)(!1),[R,z]=(0,s.useState)(!1),[W,K]=(0,s.useState)(0),[Y,Z]=(0,s.useState)(!1),[q,te]=(0,s.useState)(!1),[ne,se]=(0,s.useState)(null),[oe,ie]=(0,s.useState)(!1),re=(t||"").split("/").pop()||"";let ae=[];T&&T.name&&(ae=T.name.split("/")),(0,s.useEffect)((()=>{if(p&&I&&I.length>=1){let e=I.find((e=>e.is_latest))||ee;""!==b&&(e=I.find((e=>e.version_id===b))||ee),e.is_delete_marker||ie(!0),E(e)}}),[b,p,I]),(0,s.useEffect)((()=>{f&&""!==t&&r.F.buckets.listObjects(n,{prefix:t,with_versions:p,limit:21}).then((e=>{const t=e.data.objects||[];if(p){Z(t.length>20),t.splice(20),k(t),$(t);const e=t.reduce(((e,t)=>null!==t&&void 0!==t&&t.size?e+t.size:e),0);K(e)}else{const e=t[0];E(e),$([]),e.is_delete_marker||ie(!0)}x((0,d.oe)(!1))})).catch((e=>{console.error("Error loading object details",e.error),x((0,d.oe)(!1))}))}),[f,n,t,x,p,b]),(0,s.useEffect)((()=>{oe&&""!==t&&r.F.buckets.getObjectMetadata(n,{prefix:t,versionID:(null===T||void 0===T?void 0:T.version_id)||""}).then((e=>{let t=u()(e.data,"objectMetadata",{});se(t),ie(!1)})).catch((e=>{console.error("Error Getting Metadata Status: ",e.detailedError),ie(!1)}))}),[n,t,oe,null===T||void 0===T?void 0:T.version_id]);let le=[];T&&T.tags&&(le=Object.keys(T.tags));const de=(0,w.jsx)("div",{style:{textAlign:"center",marginTop:35},children:(0,w.jsx)(m.aHM,{})});if(!T)return f?de:null;const ce=ae.length>0?ae[ae.length-1]:T.name,he=[n,re,[n,T.name].join("/")],ue=(0,_._)(he,[l.OV.S3_PUT_OBJECT_TAGGING,l.OV.S3_PUT_ACTIONS]),me=(0,_._)(he,[l.OV.S3_GET_BUCKET_VERSIONING,l.OV.S3_PUT_BUCKET_VERSIONING,l.OV.S3_GET_OBJECT_VERSION,l.OV.S3_GET_ACTIONS,l.OV.S3_PUT_ACTIONS]),xe=(0,_._)(he,[l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS]),pe=(0,_._)([n,re,[n,T.name].join("/")],[l.OV.S3_DELETE_OBJECT,l.OV.S3_DELETE_ACTIONS]);let je=(0,A.IZ)(ne,re);const ge=[{action:()=>{(0,P._)(x,n,t,T)},label:"Download",disabled:!!T.is_delete_marker||!xe,icon:(0,w.jsx)(m.s3U,{}),tooltip:xe?"Download this Object":(0,l.vj)([l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS],"download this object")},{action:()=>{S(!0)},label:"Share",disabled:!!T.is_delete_marker||!xe,icon:(0,w.jsx)(m.liv,{}),tooltip:xe?"Share this File":(0,l.vj)([l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS],"share this object")},{action:()=>{z(!0)},label:"Preview",disabled:!!T.is_delete_marker||"none"===je&&!xe,icon:(0,w.jsx)(m.cyn,{}),tooltip:xe?"Preview this File":(0,l.vj)([l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS],"preview this object")},{action:()=>{C(!0)},label:"Tags",disabled:!!T.is_delete_marker||""!==b||!ue,icon:(0,w.jsx)(m.P3Z,{}),tooltip:ue?"Change Tags for this File":(0,l.vj)([l.OV.S3_PUT_OBJECT_TAGGING,l.OV.S3_GET_OBJECT_TAGGING,l.OV.S3_GET_ACTIONS,l.OV.S3_PUT_ACTIONS],"set Tags on this object")},{action:()=>{x((0,d.cQ)({status:!j,objectName:ce}))},label:j?"Hide Object Versions":"Display Object Versions",icon:(0,w.jsx)(m.j1U,{}),disabled:!p||!(T.version_id&&"null"!==T.version_id)||!me,tooltip:me?T.version_id&&"null"!==T.version_id?"Display Versions for this file":"":(0,l.vj)([l.OV.S3_GET_BUCKET_VERSIONING,l.OV.S3_PUT_BUCKET_VERSIONING,l.OV.S3_GET_OBJECT_VERSION,l.OV.S3_GET_ACTIONS,l.OV.S3_PUT_ACTIONS],"display all versions of this object")}];return(0,w.jsxs)(s.Fragment,{children:[v&&T&&(0,w.jsx)(J.default,{open:v,closeModalAndRefresh:()=>{B(null),S(!1)},bucketName:n,dataObject:N||T}),D&&(0,w.jsx)(H,{deleteOpen:D,selectedBucket:n,selectedObject:t,closeDeleteModalAndRefresh:e=>{L(!1),e&&""===b?h(!0):(x((0,d.SK)(!0)),x((0,d.Ai)("")),x((0,d.oe)(!0)))},versioningInfo:p?i:void 0,selectedVersion:b}),R&&T&&(0,w.jsx)(M.default,{open:R,bucketName:n,actualInfo:T,onClosePreview:()=>{z(!1)}}),y&&T&&(0,w.jsx)(Q,{modalOpen:y,bucketName:n,actualInfo:T,onCloseAndUpdate:e=>{C(!1),e&&x((0,d.oe)(!0))}}),q&&T&&(0,w.jsx)(X,{open:q,closeModal:()=>{te(!1)},currentItem:re,bucketName:n,internalPaths:t,actualInfo:T}),f?(0,w.jsx)(s.Fragment,{children:de}):(0,w.jsxs)(m.azJ,{sx:{"& .ObjectDetailsTitle":{display:"flex",alignItems:"center","& .min-icon":{width:26,height:26,minWidth:26,minHeight:26}},"& .objectNameContainer":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",alignItems:"center",marginLeft:10},"& .capitalizeFirst":{textTransform:"capitalize"},"& .detailContainer":{padding:"0 22px",marginBottom:10,fontSize:14}},children:[(0,w.jsx)(m.Smc,{title:(0,w.jsxs)("div",{className:"ObjectDetailsTitle",children:[U(ce||"",!0),(0,w.jsx)("span",{className:"objectNameContainer",children:ce})]}),items:ge}),(0,w.jsx)(V.A,{tooltip:pe?"":(0,l.vj)([l.OV.S3_DELETE_OBJECT,l.OV.S3_DELETE_ACTIONS],"delete this object"),children:(0,w.jsx)(m.xA9,{item:!0,xs:12,sx:{justifyContent:"center",display:"flex"},children:(0,w.jsx)(_.R,{resource:[n,re,[n,T.name].join("/")],scopes:[l.OV.S3_DELETE_OBJECT,l.OV.S3_DELETE_ACTIONS],errorProps:{disabled:!0},children:(0,w.jsx)(m.$nd,{id:"delete-element-click",icon:(0,w.jsx)(m.d7y,{}),iconLocation:"start",fullWidth:!0,variant:"secondary",onClick:()=>{L(!0)},disabled:""===b&&T.is_delete_marker,sx:{width:"calc(100% - 44px)",margin:"8px 0"},label:"Delete"+(""!==b?" version":"")})})})}),(0,w.jsx)(m.kCK,{icon:(0,w.jsx)(m.Hch,{}),label:(0,c.t)("Object Info")}),(0,w.jsxs)(m.azJ,{className:"detailContainer",children:[(0,w.jsx)("strong",{children:(0,c.t)("Name:")}),(0,w.jsx)("br",{}),(0,w.jsx)("div",{style:{overflowWrap:"break-word"},children:ce})]}),""!==b&&(0,w.jsxs)(m.azJ,{className:"detailContainer",children:[(0,w.jsx)("strong",{children:(0,c.t)("Version ID:")}),(0,w.jsx)("br",{}),b]}),(0,w.jsxs)(m.azJ,{className:"detailContainer",children:[(0,w.jsx)("strong",{children:(0,c.t)("Size:")}),(0,w.jsx)("br",{}),(0,g.nO)(`${T.size||"0"}`)]}),T.version_id&&"null"!==T.version_id&&""===b&&(0,w.jsxs)(m.azJ,{className:"detailContainer",children:[(0,w.jsx)("strong",{children:(0,c.t)("Versions:")}),(0,w.jsx)("br",{}),F.length,Y?"+":"",(0,c.t)("version"),1!==F.length?"s":"",","," ",(0,g.qO)(W),Y?"+":""]}),""===b&&(0,w.jsxs)(m.azJ,{className:"detailContainer",children:[(0,w.jsx)("strong",{children:(0,c.t)("Last Modified:")}),(0,w.jsx)("br",{}),(e=>{const t=new Date,n=new Date(e),s=t.getTime()-n.getTime(),o=(0,g.eQ)(s,"ms");return""!==o.trim()?`${o} ago`:"Just now"})(T.last_modified||"")]}),(0,w.jsxs)(m.azJ,{className:"detailContainer",children:[(0,w.jsx)("strong",{children:(0,c.t)("ETAG:")}),(0,w.jsx)("br",{}),T.etag||"N/A"]}),(0,w.jsxs)(m.azJ,{className:"detailContainer",children:[(0,w.jsx)("strong",{children:(0,c.t)("Tags:")}),(0,w.jsx)("br",{}),0===le.length?"N/A":le.map(((e,t)=>(0,w.jsxs)("span",{children:[e,":",u()(T,`tags.${e}`,""),t<le.length-1?", ":""]},`key-vs-${t.toString()}`)))]}),(0,w.jsx)(m.azJ,{className:"detailContainer",children:(0,w.jsx)(_.R,{scopes:[l.OV.S3_GET_OBJECT_LEGAL_HOLD,l.OV.S3_GET_ACTIONS],resource:n,children:(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)("strong",{children:(0,c.t)("Legal Hold:")}),(0,w.jsx)("br",{}),T.legal_hold_status?"On":"Off"]})})}),(0,w.jsx)(m.azJ,{className:"detailContainer",children:(0,w.jsx)(_.R,{scopes:[l.OV.S3_GET_OBJECT_RETENTION,l.OV.S3_GET_ACTIONS],resource:n,children:(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)("strong",{children:(0,c.t)("Retention Policy:")}),(0,w.jsx)("br",{}),(0,w.jsx)("span",{className:"capitalizeFirst",children:(T.version_id&&T.version_id,(0,w.jsx)(s.Fragment,{children:T.retention_mode?T.retention_mode.toLowerCase():"None"}))})]})})}),!T.is_delete_marker&&(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)(m.kCK,{label:(0,c.t)("Metadata"),icon:(0,w.jsx)(m.$vN,{})}),(0,w.jsx)(m.azJ,{className:"detailContainer",children:T&&ne?(0,w.jsx)(G,{metaData:ne}):null})]})]})]})},ne=e=>{let{versionToRestore:t,bucketName:n,objectPath:o,restoreOpen:i,onCloseAndUpdate:l}=e;const h=(0,a.j)(),[u,p]=(0,s.useState)(!1);return(0,w.jsx)(W.A,{title:(0,c.t)("Restore File Version"),confirmText:"Restore",isOpen:i,isLoading:u,titleIcon:(0,w.jsx)(m.YkU,{}),onConfirm:()=>{p(!0),r.F.buckets.putObjectRestore(n,{prefix:o,version_id:t.version_id||""}).then((()=>{p(!1),l(!0),h((0,d.NV)({prefix:o,objectInfo:t}))})).catch((e=>{h((0,O.C9)((0,x.S)(e.error))),p(!1)}))},confirmButtonProps:{variant:"secondary",disabled:u},onClose:()=>{l(!1)},confirmationContent:(0,w.jsxs)(m.azJ,{id:"alert-dialog-description",children:[(0,c.t)("Are you sure you want to restore"),(0,w.jsx)("br",{}),(0,w.jsx)("b",{children:o})," ",(0,w.jsx)("br",{}),(0,c.t)("with Version ID:"),(0,w.jsx)("br",{}),(0,w.jsx)("b",{children:t.version_id}),"?"]})})},se=e=>{let{type:t}=e,n="#000",s="";switch(t){case"null":n="#07193E",s="NULL VERSION";break;case"deleted":n="#868686",s="DELETED";break;default:n="#174551",s="CURRENT VERSION"}return(0,w.jsx)("span",{style:{backgroundColor:n,padding:"0 5px",display:"inline-block",color:"#FFF",fontWeight:"bold",fontSize:12,borderRadius:2,whiteSpace:"nowrap",margin:"0 10px"},children:s})},oe=v.Ay.div((e=>{let{theme:t}=e;return{"&:before":{content:"' '",display:"block",position:"absolute",width:"2px",height:"calc(100% + 2px)",backgroundColor:u()(t,"borderColor","#F8F8F8"),left:"24px"},"& .mainFileVersionItem":{borderBottom:`${u()(t,"borderColor","#F8F8F8")} 1px solid`,padding:"1rem 0",margin:"0 0.5rem 0 2.5rem",cursor:"pointer","&.deleted":{color:"#868686"}},"& .intermediateLayer":{margin:"0 1.5rem 0 1.5rem","&:hover, &.selected":{backgroundColor:u()(t,"boxBackground","#F8F8F8"),"& > div":{borderBottomColor:u()(t,"boxBackground","#F8F8F8")}}},"& .versionContainer":{fontSize:16,fontWeight:"bold",display:"flex",alignItems:"center","& svg.min-icon":{width:18,height:18,minWidth:18,minHeight:18,marginRight:10}},"& .buttonContainer":{textAlign:"right","& button":{marginLeft:"1.5rem"}},"& .versionID":{fontSize:"12px",margin:"2px 0",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"95%",overflow:"hidden"},"& .versionData":{marginRight:"10px",fontSize:12,color:"#868686"},"@media (max-width: 600px)":{"& .buttonContainer":{"& button":{marginLeft:"5px"}}},"@media (max-width: 799px)":{"&:before":{display:"none"},"& .mainFileVersionItem":{padding:"5px 0px",margin:0},"& .intermediateLayer":{margin:0,"&:hover, &.selected":{backgroundColor:"transparent","& > div":{borderBottomColor:u()(t,"boxBackground","#F8F8F8")}}},"& .versionContainer":{fontSize:14,"& svg.min-icon":{display:"none"}},"& .versionData":{textOverflow:"ellipsis",maxWidth:"95%",overflow:"hidden",whiteSpace:"nowrap"},"& .collapsableInfo":{display:"flex",flexDirection:"column"},"& .versionItem":{display:"none"}}}})),ie=e=>{let{fileName:t,versionInfo:n,isSelected:s,checkable:o,isChecked:i,onCheck:r,onShare:a,onDownload:l,onRestore:d,onPreview:h,globalClick:u,index:x,key:p,style:b}=e;const f=n.is_delete_marker,v=[{icon:(0,w.jsx)(m.cyn,{}),action:h,tooltip:"Preview"},{icon:(0,w.jsx)(m.s3U,{}),action:l,tooltip:"Download this version"},{icon:(0,w.jsx)(m.liv,{}),action:a,tooltip:"Share this version"},{icon:(0,w.jsx)(m.YkU,{}),action:d,tooltip:"Restore this version"}];let S=null;n.is_delete_marker?S="deleted":n.is_latest?S="current":"null"===n.version_id&&(S="null");let _=j.c9.now();return n.last_modified&&(_=j.c9.fromISO(n.last_modified)),(0,w.jsx)(oe,{children:(0,w.jsx)(m.xA9,{container:!0,className:"ctrItem",onClick:()=>{u(n)},style:b,children:(0,w.jsx)(m.xA9,{item:!0,xs:12,className:"intermediateLayer "+(s?"selected":""),children:(0,w.jsxs)(m.xA9,{item:!0,xs:!0,className:"mainFileVersionItem "+(n.is_delete_marker?"deleted":""),children:[(0,w.jsx)(m.xA9,{item:!0,xs:12,children:(0,w.jsxs)(m.xA9,{container:!0,children:[(0,w.jsxs)(m.xA9,{item:!0,xs:!0,md:4,className:"versionContainer",children:[o&&(0,w.jsx)(m.Sc0,{checked:i,id:`select-${n.version_id}`,name:`select-${n.version_id}`,onChange:e=>{e.stopPropagation(),r(n.version_id||"")},value:n.version_id||"",disabled:n.is_delete_marker,sx:{width:"initial"}}),U(t,!0),(0,c.t)("v"),x.toString(),(0,w.jsx)("span",{className:"versionItem",children:S&&(0,w.jsx)(se,{type:S})})]}),(0,w.jsx)(m.xA9,{item:!0,xs:10,md:8,className:"buttonContainer",children:v.map(((e,t)=>(0,w.jsx)(m.m_M,{tooltip:e.tooltip,children:(0,w.jsx)(m.K0,{size:"small",id:`version-action-${e.tooltip}-${t.toString()}`,className:"spacing "+(f?"buttonDisabled":""),disabled:f,onClick:t=>{t.stopPropagation(),f?t.preventDefault():e.action(n)},sx:{backgroundColor:"#F8F8F8",borderRadius:"100%",width:"28px",height:"28px",padding:"5px","& .min-icon":{width:"14px",height:"14px"}},children:e.icon})},`version-action-${e.tooltip}-${t.toString()}`)))})]})}),(0,w.jsx)(m.xA9,{item:!0,xs:12,className:"versionID",children:"null"!==n.version_id?n.version_id:"-"}),(0,w.jsxs)(m.xA9,{item:!0,xs:12,className:"collapsableInfo",children:[(0,w.jsxs)("span",{className:"versionData",children:[(0,w.jsx)("strong",{children:(0,c.t)("Last modified:")})," ",_.toFormat("ccc, LLL dd yyyy HH:mm:ss (ZZZZ)")]}),(0,w.jsxs)("span",{className:"versionData",children:[(0,w.jsx)("strong",{children:(0,c.t)("Size:")})," ",(0,g.nO)(`${n.size||"0"}`)]})]})]})})},p)})},re=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,selectedBucket:i,selectedObject:d}=e;const h=(0,a.j)(),[u,p]=(0,s.useState)(!1),[j,g]=(0,s.useState)(""),[b,f]=(0,s.useState)(!1),v=(0,o.d4)((e=>e.objectBrowser.retentionConfig)),S=(0,_._)([i],[l.OV.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===v||void 0===v?void 0:v.mode);if((0,s.useEffect)((()=>{u&&r.F.buckets.deleteObject(i,{prefix:d,non_current_versions:!0,bypass:b}).then((()=>{t(!0)})).catch((e=>{h((0,O.C9)((0,x.S)(e.error))),p(!1)}))}),[u,t,h,d,i,b]),!d)return null;return(0,w.jsx)(W.A,{title:(0,c.t)("Delete Non-Current versions"),confirmText:"Delete",isOpen:n,titleIcon:(0,w.jsx)(m.xWY,{}),isLoading:u,onConfirm:()=>{p(!0)},onClose:()=>t(!1),confirmButtonProps:{disabled:"YES, PROCEED"!==j||u},confirmationContent:(0,w.jsxs)(s.Fragment,{children:[(0,c.t)("Are you sure you want to delete all the non-current versions for:")," ",(0,w.jsx)("b",{children:d}),"? ",(0,w.jsx)("br",{}),S&&(0,w.jsx)(s.Fragment,{children:(0,w.jsx)("div",{style:{marginTop:10},children:(0,w.jsx)(m.dOG,{label:(0,c.t)("Bypass Governance Mode"),indicatorLabels:["Yes","No"],checked:b,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:e=>{f(!b)},description:""})})}),(0,w.jsx)("br",{}),(0,c.t)("To continue please type"),(0,w.jsx)("b",{children:(0,c.t)("YES, PROCEED")}),(0,c.t)("in the box."),(0,w.jsx)("br",{}),(0,w.jsx)("br",{}),(0,w.jsx)(m.xA9,{item:!0,xs:12,children:(0,w.jsx)(m.cl_,{id:"type-confirm",name:"retype-tenant",onChange:e=>{g(e.target.value)},label:"",value:j})})]})})},ae=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,selectedBucket:i,selectedVersions:d,selectedObject:h}=e;const u=(0,a.j)(),[p,j]=(0,s.useState)(!1),[g,b]=(0,s.useState)(!1),f=(0,o.d4)((e=>e.objectBrowser.retentionConfig)),v=(0,_._)([i],[l.OV.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===f||void 0===f?void 0:f.mode);return(0,s.useEffect)((()=>{if(p){const e=d.map((e=>({path:h,versionID:e,recursive:!1})));e.length>0&&r.F.buckets.deleteMultipleObjects(i,e,{all_versions:!1,bypass:g}).then((()=>{j(!1),t(!0)})).catch((e=>{u((0,O.C9)((0,x.S)(e.error))),j(!1)}))}}),[p,t,i,h,d,g,u]),d?(0,w.jsx)(W.A,{title:(0,c.t)("Delete Selected Versions"),confirmText:"Delete",isOpen:n,titleIcon:(0,w.jsx)(m.xWY,{}),isLoading:p,onConfirm:()=>{j(!0)},onClose:()=>t(!1),confirmationContent:(0,w.jsxs)(s.Fragment,{children:[(0,c.t)("Are you sure you want to delete the selected"),d.length," ",(0,c.t)("versions for"),(0,w.jsx)("strong",{children:h}),"?",v&&(0,w.jsx)(s.Fragment,{children:(0,w.jsx)("div",{style:{marginTop:10},children:(0,w.jsx)(m.dOG,{label:(0,c.t)("Bypass Governance Mode"),indicatorLabels:["Yes","No"],checked:g,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:e=>{b(!g)},description:""})})})]})}):null};var le=n(9198);const de={is_latest:!0,last_modified:"",legal_hold_status:"",name:"",retention_mode:"",retention_until_date:"",size:0,tags:{},version_id:void 0},ce=e=>{let{internalPaths:t,bucketName:n}=e;const i=(0,a.j)(),l=(0,o.d4)((e=>e.objectBrowser.searchVersions)),h=(0,o.d4)((e=>e.objectBrowser.loadingVersions)),p=(0,o.d4)((e=>e.objectBrowser.selectedVersion)),j=(0,o.d4)(O.Rq),[b,f]=(0,s.useState)(!1),[v,S]=(0,s.useState)(null),[_,y]=(0,s.useState)(null),[C,T]=(0,s.useState)([]),[E,I]=(0,s.useState)(!1),[A,N]=(0,s.useState)(!1),[B,F]=(0,s.useState)(null),[$,D]=(0,s.useState)("date"),[L,R]=(0,s.useState)(!1),[z,U]=(0,s.useState)(!1),[G,W]=(0,s.useState)(!1),[K,H]=(0,s.useState)([]),[Y,Z]=(0,s.useState)(!1);let q=[];v&&v.name&&(q=v.name.split("/")),(0,s.useEffect)((()=>{h||v||i((0,d.SK)(!0))}),[h,v,i]),(0,s.useEffect)((()=>{h&&""!==t&&r.F.buckets.listObjects(n,{prefix:t,with_versions:j,limit:21}).then((e=>{const n=u()(e.data,"objects",[]);I(n.length>20),n.splice(20);const s=n.filter((e=>e.name===t));j?(S(s.find((e=>e.is_latest))||de),T(s)):(S(s[0]),T([])),i((0,d.SK)(!1))})).catch((e=>{i((0,O.C9)((0,x.S)(e.error))),i((0,d.SK)(!1))}))}),[h,n,t,i,j]);const Q=e=>{y(e),f(!0)},X=e=>{y(e),R(!0)},ee=e=>{F(e),N(!0)},te=e=>{(0,P._)(i,n,t,e)},se=e=>{i((0,d.Ai)(e.version_id||""))},oe=C.filter((e=>!!e.version_id&&e.version_id.includes(l))),ce=C.reduce(((e,t)=>t.size?e+t.size:e),0);oe.sort(((e,t)=>{if("size"===$)return e.size&&t.size?e.size<t.size?-1:e.size>t.size?1:0:0;{const n=new Date(e.last_modified||"").getTime(),s=new Date(t.last_modified||"").getTime();return n<s?1:n>s?-1:0}}));const he=e=>{if(K.includes(e)){const t=K.filter((t=>t!==e));return void H(t)}const t=[...K];t.push(e),H(t)};return(0,w.jsxs)(s.Fragment,{children:[b&&v&&(0,w.jsx)(J.default,{open:b,closeModalAndRefresh:()=>{y(null),f(!1),R(!1)},bucketName:n,dataObject:_||v}),A&&v&&B&&(0,w.jsx)(ne,{restoreOpen:A,bucketName:n,versionToRestore:B,objectPath:v.name||"",onCloseAndUpdate:e=>{N(!1),F(null),e&&(i((0,d.SK)(!0)),i((0,d.oe)(!0)))}}),L&&v&&(0,w.jsx)(M.default,{open:L,bucketName:n,actualInfo:{name:v.name||"",version_id:_&&_.version_id?_.version_id:"null",size:_&&_.size?_.size:0,content_type:"",last_modified:v.last_modified||""},onClosePreview:()=>{R(!1)}}),z&&(0,w.jsx)(re,{deleteOpen:z,closeDeleteModalAndRefresh:e=>{U(!1),e&&(i((0,d.SK)(!0)),i((0,d.Ai)("")),i((0,d.oe)(!0)))},selectedBucket:n,selectedObject:t}),Y&&(0,w.jsx)(ae,{selectedBucket:n,selectedObject:t,deleteOpen:Y,selectedVersions:K,closeDeleteModalAndRefresh:e=>{Z(!1),e&&(i((0,d.SK)(!0)),i((0,d.Ai)("")),i((0,d.oe)(!0)),H([]))}}),(0,w.jsxs)(m.xA9,{container:!0,sx:{width:"100%",padding:10,"@media (max-width: 799px)":{minHeight:800}},children:[!v&&(0,w.jsx)(m.xA9,{item:!0,xs:12,children:(0,w.jsx)(m.z21,{})}),v&&(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)(m.xA9,{item:!0,xs:12,children:(0,w.jsx)(k,{bucketName:n,internalPaths:t,hidePathButton:!0})}),(0,w.jsx)(m.xA9,{item:!0,xs:12,sx:{position:"relative","& .detailsSpacer":{marginRight:18,"@media (max-width: 600px)":{marginRight:0}},[`@media (max-width: ${m.nmC.md}px)`]:{"&::before":{display:"none"}}},children:(0,w.jsx)(m.lcx,{icon:(0,w.jsx)("span",{style:{display:"block",marginTop:"-10px"},children:(0,w.jsx)(m.j1U,{style:{width:20,height:20}})}),title:`${q.length>0?q[q.length-1]:v.name} Versions`,subTitle:(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)("span",{className:"detailsSpacer",children:(0,w.jsxs)("strong",{children:[C.length,E?"+":"",(0,c.t)("Version"),1===C.length?"":"s","\xa0\xa0\xa0"]})}),(0,w.jsx)("span",{className:"detailsSpacer",children:(0,w.jsxs)("strong",{children:[(0,g.qO)(ce),E?"+":""]})})]}),actions:(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)(V.A,{tooltip:(0,c.t)("Select Multiple Versions"),children:(0,w.jsx)(m.$nd,{id:"select-multiple-versions",onClick:()=>{W(!G)},icon:(0,w.jsx)(m.IN,{}),variant:G?"callAction":"regular",style:{marginRight:8}})}),G&&(0,w.jsx)(V.A,{tooltip:(0,c.t)("Delete Selected Versions"),children:(0,w.jsx)(m.$nd,{id:"delete-multiple-versions",onClick:()=>{Z(!0)},icon:(0,w.jsx)(m.d7y,{}),variant:"secondary",style:{marginRight:8},disabled:0===K.length})}),(0,w.jsx)(V.A,{tooltip:(0,c.t)("Delete Non Current Versions"),children:(0,w.jsx)(m.$nd,{id:"delete-non-current",onClick:()=>{U(!0)},icon:(0,w.jsx)(m.rgY,{}),variant:"secondary",style:{marginRight:15},disabled:C.length<=1})}),(0,w.jsx)(m.l6P,{id:"sort-by",options:[{label:"Date",value:"date"},{label:"Size",value:"size"}],value:$,label:(0,c.t)("Sort by"),onChange:e=>{D(e)},noLabelMinWidth:!0})]}),bottomBorder:!1})}),(0,w.jsx)(m.xA9,{item:!0,xs:12,sx:{flexGrow:1,height:"calc(100% - 120px)",overflow:"auto",[`@media (max-width: ${m.nmC.md}px)`]:{height:600}},children:v.version_id&&"null"!==v.version_id&&(0,w.jsx)(le.B8,{style:{width:"100%"},containerStyle:{width:"100%",maxWidth:"100%"},width:1,height:800,rowCount:oe.length,rowHeight:108,rowRenderer:e=>{let{key:t,index:n,isScrolling:s,isVisible:o,style:i}=e;const r=C.length-n;return(0,w.jsx)(ie,{style:i,fileName:(null===v||void 0===v?void 0:v.name)||"",versionInfo:oe[n],index:r,onDownload:te,onRestore:ee,onShare:Q,onPreview:X,globalClick:se,isSelected:p===oe[n].version_id,checkable:G,onCheck:he,isChecked:K.includes(oe[n].version_id||"")},t)}})})]})]})]})},he=e=>{if(e.name.endsWith("/"))return"";const t=j.c9.now(),n=j.c9.fromISO(e.last_modified);return t.hasSame(n,"day")&&t.hasSame(n,"month")&&t.hasSame(n,"year")?`Today, ${n.toFormat("HH:mm")}`:n.toFormat("ccc, LLL dd yyyy HH:mm (ZZZZ)")},ue=e=>e.name.endsWith("/")||!e.size?"-":(0,g.nO)(String(e.size)),me=[{label:"Name",elementKey:"name",renderFunction:U,enableSort:!0},{label:"Last Modified",elementKey:"last_modified",renderFunction:he,renderFullObject:!0,enableSort:!0},{label:"Size",elementKey:"size",renderFunction:ue,renderFullObject:!0,width:100,enableSort:!0}],xe=[{label:"Name",elementKey:"name",renderFunction:U,enableSort:!0},{label:"Object Date",elementKey:"last_modified",renderFunction:he,renderFullObject:!0,enableSort:!0},{label:"Size",elementKey:"size",renderFunction:ue,renderFullObject:!0,width:100,enableSort:!0},{label:"Deleted",elementKey:"delete_flag",renderFunction:e=>e?"Yes":"No",width:60}];var pe=n(6537);const je=()=>{const e=(0,a.j)(),t=(0,i.g)(),n=(0,i.Zp)(),[r,c]=(0,s.useState)("ASC"),[h,x]=(0,s.useState)("name"),p=t.bucketName||"",j=(0,o.d4)((e=>e.objectBrowser.objectDetailsOpen)),g=(0,o.d4)((e=>e.objectBrowser.requestInProgress)),b=(0,o.d4)(pe.s$),f=!(null===b||void 0===b||!b.includes("object-browser-only")),v=(0,o.d4)((e=>e.objectBrowser.rewind.rewindEnabled)),S=(0,o.d4)((e=>e.objectBrowser.records)),y=(0,o.d4)((e=>e.objectBrowser.searchObjects)),O=(0,o.d4)((e=>e.objectBrowser.selectedObjects)),C=(0,o.d4)((e=>e.objectBrowser.connectionError)),T=(0,o.d4)((e=>e.system.anonymousMode)),E=(0,_._)(p,[l.OV.S3_LIST_BUCKET,l.OV.S3_ALL_LIST_BUCKET]),I=S.filter((e=>{if(""===y)return!0;return e.name.toLowerCase().indexOf(y.toLowerCase())>=0})).sort((0,A.$w)(h));let k=[];k="ASC"===r?I:I.reverse();const N=[{type:"view",tooltip:"View",onClick:t=>{var s;const o=t.name||"",i=`/browser/${encodeURIComponent(p)}${o?`/${encodeURIComponent(o)}`:""}`;!T||null!==(s=t.name)&&void 0!==s&&s.endsWith("/")?(e((0,d.KX)([])),n(i),T||(e((0,d.TO)(!0)),e((0,d.SK)(!0))),e((0,d.A7)(o))):(0,P._)(e,p,o,t)},sendOnlyId:!1}];let B=E||T?"This location is empty"+(v?"":", please try uploading a new file"):(0,l.vj)([l.OV.S3_LIST_BUCKET,l.OV.S3_ALL_LIST_BUCKET],"view Objects in this bucket");C&&(B="Objects List unavailable. Please review your WebSockets configuration and try again");let F="calc(100vh - 290px)";return f&&(F="calc(100vh - 315px)"),(0,w.jsx)(m.bQt,{itemActions:N,columns:v?xe:me,isLoading:g,entityName:"Objects",idField:"name",records:k,customPaperHeight:F,selectedItems:O,onSelect:T?void 0:t=>{const n=t.target,s=n.value,o=n.checked;let i=[...O];return o?i.push(s):i=i.filter((e=>e!==s)),e((0,d.KX)(i)),e((0,d.A7)(null)),i},customEmptyMessage:B,sortEnabled:{currentSort:h,currentDirection:r,onSortClick:t=>{const n=u()(t,"sortDirection","DESC");x(t.sortBy),c(n),e((0,d.Yw)(!0))}},onSelectAll:()=>{if(e((0,d.A7)(null)),O.length===k.length)return void e((0,d.KX)([]));const t=k.map((e=>e.name));e((0,d.KX)(t))},rowStyle:e=>{var t;let{index:n}=e;return null!==(t=k[n])&&void 0!==t&&t.delete_flag?"deleted":""},sx:{minHeight:j?"100%":"initial"},noBackground:!0})},ge=e=>{let{placeholder:t="",onChange:n,overrideClass:s,value:o,id:i="search-resource",label:r="",sx:a}=e;return(0,w.jsx)(m.cl_,{placeholder:t,className:s||"",id:i,label:r,onChange:e=>{n(e.target.value)},value:o,startIcon:(0,w.jsx)(m.WIv,{}),sx:a})},be=()=>{const e=(0,a.j)(),t=(0,o.d4)((e=>e.objectBrowser.searchObjects));return(0,w.jsx)(ge,{placeholder:(0,c.t)("Start typing to filter objects in the bucket"),onChange:t=>{e((0,d.$X)(t))},value:t})},fe=y(s.lazy((()=>n.e(941).then(n.bind(n,5941))))),ve=y(s.lazy((()=>Promise.resolve().then(n.bind(n,718))))),Se=y(s.lazy((()=>n.e(704).then(n.bind(n,2704))))),_e=y(s.lazy((()=>Promise.resolve().then(n.bind(n,7524))))),we={borderWidth:2,borderRadius:2,borderColor:"transparent",outline:"none"},ye={borderStyle:"dashed",backgroundColor:"transparent",borderColor:"#2196f3"},Oe={borderStyle:"dashed",backgroundColor:"transparent",borderColor:"#00e676"},Ce=()=>{var e;const t=(0,a.j)(),n=(0,i.g)(),h=(0,i.Zp)(),b=(0,i.zy)(),f=(0,o.d4)((e=>e.objectBrowser.rewind.rewindEnabled)),v=(0,o.d4)((e=>e.objectBrowser.rewind.bucketToRewind)),S=(0,o.d4)((e=>e.objectBrowser.versionsMode)),y=(0,o.d4)((e=>e.objectBrowser.showDeleted)),E=(0,o.d4)((e=>e.objectBrowser.objectDetailsOpen)),I=(0,o.d4)((e=>e.objectBrowser.selectedInternalPaths)),P=(0,o.d4)((e=>e.objectBrowser.requestInProgress)),R=(0,o.d4)((e=>e.objectBrowser.simplePath)),z=(0,o.d4)((e=>e.objectBrowser.versionInfo)),U=(0,o.d4)((e=>e.objectBrowser.downloadRenameModal)),M=(0,o.d4)((e=>e.objectBrowser.selectedPreview)),G=(0,o.d4)((e=>e.objectBrowser.shareFileModalOpen)),J=(0,o.d4)((e=>e.objectBrowser.previewOpen)),W=(0,o.d4)((e=>e.system.anonymousMode)),K=(0,o.d4)((e=>{var t;return(null===(t=e.objectBrowser)||void 0===t?void 0:t.records)||[]})),H=(0,o.d4)(F.Nx),Y=(0,o.d4)(F.fT),[Z,q]=(0,s.useState)(!1),[Q,ee]=(0,s.useState)(!1),[ne,se]=(0,s.useState)(!1),[oe,ie]=(0,s.useState)(!1),[re,ae]=(0,s.useState)(!1),[le,de]=(0,s.useState)(null),[he,ue]=(0,s.useState)(null),[me,xe]=(0,s.useState)(!1),pe=N(z.status),ge=n.bucketName||"",Ce=b.pathname.split(`/browser/${ge}/`),Te=2===Ce.length?decodeURIComponent(Ce[1]):"",Ee=Te.split("/").filter((e=>""!==e));let Ie=[ge];Ee.length>0&&(Ie=Ie.concat(Ee));const ke=(0,s.useRef)(null),Ae=(0,s.useRef)(null),Ne=(0,o.d4)((e=>e.console.session&&e.console.session.permissions||{})),Be=[l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],Fe=Ie.join("/"),$e=function(e,t){const n=T(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).reduce(((e,t)=>{const n=C(t);return n&&e.push(`.${n}`),e}),[]);return[...new Set(n)].join(",")}(Ne,Fe,Be),Ve=T(Ne,Fe,Be),De=(0,_._)([Fe,...Ve],[l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS]),Le=(0,_._)(ge,[l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS,l.OV.S3_GET_BUCKET_VERSIONING]),Pe=(0,_._)([Fe,...Ve],[l.OV.S3_DELETE_OBJECT,l.OV.S3_DELETE_ACTIONS]),Re=(0,_._)([Fe,...Ve],Be)||W,ze=(0,_._)(ge,[l.OV.S3_GET_BUCKET_POLICY,l.OV.S3_PUT_BUCKET_POLICY,l.OV.S3_GET_ACTIONS,l.OV.S3_PUT_ACTIONS]),Ue=(0,o.d4)((e=>e.objectBrowser.selectedObjects)),Me=(()=>{let e=!1;if(1===Ue.length){e=!!K.find((e=>e.name===`${Ue[0]}`&&e.delete_flag))}return e})(),Ge=(0,s.useCallback)((()=>{const e=Ue[0];!me&&e&&r.F.buckets.getObjectMetadata(ge,{prefix:e}).then((e=>{let t=u()(e.data,"objectMetadata",{});xe(!0),ue(t)})).catch((e=>{console.error("Error Getting Metadata Status: ",e,null===e||void 0===e?void 0:e.detailedError),xe(!0)}))}),[ge,Ue,me]);(0,s.useEffect)((()=>{ge&&!Me&&Ge()}),[ge,Ue,Ge,Me]),(0,s.useEffect)((()=>{f&&v!==ge&&t((0,d.rS)())}),[f,v,ge,t]),(0,s.useEffect)((()=>{null!==Ae.current&&(Ae.current.setAttribute("directory",""),Ae.current.setAttribute("webkitdirectory",""))}),[Ae]),(0,s.useEffect)((()=>{if(1===Ue.length){const e=Ue[0],t=e.endsWith("/");let n=(0,A.IZ)(he,e);ae(!("none"===n||!De)),ie(!(!De||t))}else ie(!1),ae(!1)}),[Ue,De,he]),(0,s.useEffect)((()=>{le||W||r.F.buckets.getBucketQuota(ge).then((e=>{let t=null;e.data.quota&&(t=e.data),de(t)})).catch((e=>{console.error("Error Getting Quota Status: ",e.error.detailedMessage),de(null)}))}),[le,ge,W]),(0,s.useEffect)((()=>{Ue.length>0?t((0,d.TO)(!0)):0!==Ue.length||null!==I||P||t((0,d.TO)(!1))}),[Ue,I,t,P]),(0,s.useEffect)((()=>{ne||(t((0,F.ZU)(!0)),se(!0))}),[ne,t,se]),(0,s.useEffect)((()=>{!P&&!H||W||r.F.buckets.bucketInfo(ge).then((e=>{t((0,F.ZU)(!1)),t((0,F.$T)(e.data))})).catch((e=>{t((0,F.ZU)(!1)),t((0,O.C9)((0,x.S)(e)))}))}),[ge,H,t,W,P]);const Je=e=>{if(null!==e&&void 0!==e&&null!==e.target.files&&void 0!==e.target.files){e.preventDefault();var t=[];for(let n=0;n<e.target.files.length;n++)t.push(e.target.files[n]);We(t,""),e.target.value=""}},We=(0,s.useCallback)(((e,n)=>{let s="";R&&(s=R.endsWith("/")?R:R+"/");((e,n,s,o)=>{let i=i=>new Promise(((r,a)=>{let l=`api/v1/buckets/${n}/objects/upload`;const c=i.name,h=new Blob([i],{type:i.type}),m=(e=>e.replace(/(^|\/)\.\//g,"/"))(u()(i,"path","")),x=u()(i,"webkitRelativePath","");let p=o;const j=(0,B.E0)(8);""!==m?p=m:""!==x&&(p=x);let g="";if(""!==s||""!==p){const e=p.split("/").slice(0,-1).join("/"),t=s.endsWith("/")?s.slice(0,-1):s;g=`${t}${t.endsWith("/")||""===e||e.startsWith("/")?"":"/"}${e}${!e.endsWith("/")||""===e.trim()&&!s.endsWith("/")?"/":""}`}l=""!==g?`${l}?prefix=${encodeURIComponent(g+c)}`:`${l}?prefix=${encodeURIComponent(c)}`;const b=encodeURIComponent(`${n}-${g}-${(new Date).getTime()}-${Math.random()}`);let f=new XMLHttpRequest;f.open("POST",l,!0),W&&f.setRequestHeader("X-Anonymous","1");let v=`An error occurred while uploading the file${e.length>1?"s":""}.`;const S={413:"Error - File size too large"};f.withCredentials=!1,f.onload=function(){if(f.status>=200&&f.status<300)t((0,d.rx)(b)),r({status:f.status}),(0,B.vy)(j);else{if(S[f.status])v=S[f.status];else if(f.response)try{const e=JSON.parse(f.response);v=e.detailedMessage}catch(e){v="something went wrong"}t((0,d.iL)({instanceID:b,msg:v})),a({status:f.status,message:v}),(0,B.vy)(j)}},f.upload.addEventListener("error",(()=>{a(v),t((0,d.iL)({instanceID:b,msg:"A network error occurred."}))})),f.upload.addEventListener("progress",(e=>{const n=Math.floor(100*e.loaded/e.total);t((0,d.DW)({instanceID:b,progress:n}))})),f.onerror=()=>{a(v),t((0,d.iL)({instanceID:b,msg:"A network error occurred."}))},f.onloadend=()=>{0===e.length&&t((0,d.Yw)(!0))},f.onabort=()=>{t((0,d.Dm)(b))};const _=new FormData;void 0!==i.size&&(_.append(i.size.toString(),h,c),(0,B.FP)(j,f),t((0,d.cP)({ID:j,bucketName:n,done:!1,instanceID:b,percentage:0,prefix:`${g}${c}`,type:"upload",waitingForFile:!1,failed:!1,cancelled:!1,errorMessage:""})),(0,B.vx)(j,_))}));const r=[];t((0,d.Nu)());for(let t=0;t<e.length;t++){const n=e[t];r.push(i(n))}Promise.allSettled(r).then((e=>{const n=e.filter((e=>"rejected"===e.status));if(n.length>0){const e=r.length,s={errorMessage:"There were some errors during file upload",detailedError:`Uploaded files ${r.length-n.length}/${e}`};t((0,O.C9)(s))}t((0,d.Yw)(!0))}))})(e,ge,s,n)}),[ge,t,R,W]),Ke=(0,s.useCallback)((e=>{if(e&&e.length>0&&Re){let n=e[0].path,s=e;$e.length>0&&(s=e.filter((e=>{const t=C(e.name);return $e.includes(t)}))),s.length?(We(s,n),console.log(`${s.length} Allowed Files Processed out of ${e.length}.`,Fe,...Ve),s.length!==e.length&&t((0,O.C9)({errorMessage:"Upload is restricted.",detailedError:(0,l.vj)([l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],"upload objects to this location")}))):(t((0,O.C9)({errorMessage:"Could not process drag and drop.",detailedError:(0,l.vj)([l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],"upload objects to this location")})),console.error("Could not process drag and drop . upload may be restricted.",Fe,...Ve))}Re||t((0,O.C9)({errorMessage:"Upload not allowed",detailedError:(0,l.vj)([l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],"upload objects to this location")}))}),[We]),{getRootProps:He,getInputProps:Ye,isDragActive:Ze,isDragAccept:qe}=(0,p.VB)({noClick:!0,onDrop:Ke}),Qe=(0,s.useMemo)((()=>({...we,...Ze?ye:{},...qe?Oe:{}})),[Ze,qe]),Xe=e=>{if(t((0,d.A7)(null)),t((0,d.cQ)({status:!1})),E&&null!==I){const e=Te.split("/");e.pop();let t="";e&&e.length>0&&(t=`${e.join("/")}/`),h(`/browser/${encodeURIComponent(ge)}/${encodeURIComponent(t)}`)}t((0,d.TO)(!1)),e&&t((0,d.Yw)(!0))};let et=j.c9.now();null!==Y&&void 0!==Y&&Y.creation_date&&(et=j.c9.fromISO(Y.creation_date));const tt=(null===Ue||void 0===Ue?void 0:Ue.length)<=1?"Download Selected":(0,c.t)("Download selected objects as Zip. Any Deleted objects in the selection would be skipped from download."),nt=[{action:()=>{t((0,$.op)(ge))},label:"Download",disabled:!De||Me,icon:(0,w.jsx)(m.s3U,{}),tooltip:De?tt:(0,l.vj)([l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS],"download objects from this bucket")},{action:()=>{t((0,$.mS)())},label:"Share",disabled:1!==Ue.length||!oe||Me,icon:(0,w.jsx)(m.liv,{}),tooltip:oe?"Share Selected File":"Sharing unavailable"},{action:()=>{t((0,$.HS)())},label:"Preview",disabled:1!==Ue.length||!re||Me,icon:(0,w.jsx)(m.cyn,{}),tooltip:re?"Preview Selected File":"Preview unavailable"},{action:()=>{t((0,$.oz)())},label:"Anonymous Access",disabled:1!==Ue.length||!Ue[0].endsWith("/")||!ze,icon:(0,w.jsx)(m._kf,{}),tooltip:1===Ue.length&&Ue[0].endsWith("/")?"Set Anonymous Access to this Folder":"Anonymous Access unavailable"},{action:()=>{q(!0)},label:"Delete",icon:(0,w.jsx)(m.d7y,{}),disabled:!Pe||0===Ue.length,tooltip:Pe?"Delete Selected Files":(0,l.vj)([l.OV.S3_DELETE_OBJECT,l.OV.S3_DELETE_ACTIONS],"delete objects in this bucket")}];return(0,w.jsxs)(s.Fragment,{children:[G&&M&&(0,w.jsx)(ve,{open:G,closeModalAndRefresh:()=>{t((0,d.Lf)(!1)),t((0,d.go)(null))},bucketName:ge,dataObject:{name:M.name,last_modified:"",version_id:M.version_id}}),Z&&(0,w.jsx)(fe,{deleteOpen:Z,selectedBucket:ge,selectedObjects:Ue,closeDeleteModalAndRefresh:e=>{q(!1),e&&(t((0,O.Hk)((0,c.t)("Objects deleted successfully."))),t((0,d.KX)([])),t((0,d.Yw)(!0)))},versioning:z}),Q&&(0,w.jsx)(Se,{open:Q,closeModalAndRefresh:()=>{ee(!1)},bucketName:ge}),J&&M&&(0,w.jsx)(_e,{open:J,bucketName:ge,actualInfo:{name:M.name||"",last_modified:"",version_id:M.version_id||"",size:M.size||0},onClosePreview:()=>{t((0,d.xE)(!1)),t((0,d.go)(null))}}),!!U&&(0,w.jsx)(X,{open:!!U,closeModal:()=>{t((0,d.Ew)(null))},currentItem:(null===(e=U.name.split("/"))||void 0===e?void 0:e.pop())||"",bucketName:ge,internalPaths:Te,actualInfo:{name:U.name,last_modified:"",version_id:U.version_id,size:U.size}}),(0,w.jsxs)(m.Mxu,{variant:"full",children:[W&&(0,w.jsx)("div",{style:{paddingBottom:16},children:(0,w.jsx)(be,{})}),(0,w.jsx)(m.azJ,{withBorders:!0,sx:{padding:"0 5px"},children:(0,w.jsx)(m.lcx,{icon:(0,w.jsx)("span",{children:(0,w.jsx)(m.brV,{style:{width:30}})}),title:ge,subTitle:W?null:(0,w.jsxs)(m.azJ,{sx:{"& .detailsSpacer":{marginRight:18,"@media (max-width: 600px)":{marginRight:0}}},children:[(0,w.jsxs)("span",{className:"detailsSpacer",children:[(0,c.t)("Created on:"),(0,w.jsx)("strong",{children:null!==Y&&void 0!==Y&&Y.creation_date?et.toFormat("ccc, LLL dd yyyy HH:mm:ss (ZZZZ)"):""})]}),(0,w.jsxs)("span",{className:"detailsSpacer",children:[(0,c.t)("Access:"),(0,w.jsx)("strong",{children:(null===Y||void 0===Y?void 0:Y.access)||""})]}),Y&&(0,w.jsx)(s.Fragment,{children:(0,w.jsxs)("span",{className:"detailsSpacer",children:[Y.size&&(0,w.jsx)(s.Fragment,{children:(0,g.qO)(Y.size)}),Y.size&&le&&(0,w.jsxs)(s.Fragment,{children:[" ","/ ",(0,g.qO)(le.quota||0)]}),Y.size&&Y.objects?" - ":"",Y.objects&&(0,w.jsxs)(s.Fragment,{children:[Y.objects,(0,c.t)("Object"),Y.objects&&1!==Y.objects?"s":""]})]})})]}),actions:(0,w.jsxs)(s.Fragment,{children:[!W&&(0,w.jsx)(V.A,{tooltip:Le?"Rewind Bucket":(0,l.vj)([l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS,l.OV.S3_GET_BUCKET_VERSIONING],"apply rewind in this bucket"),children:(0,w.jsx)(m.$nd,{id:"rewind-objects-list",label:(0,c.t)("Rewind"),icon:(0,w.jsx)(m.Exy,{color:"alert",dotOnly:!0,invisible:!f,children:(0,w.jsx)(m.osr,{style:{minWidth:16,minHeight:16,width:16,height:16,marginTop:-3}})}),variant:"regular",onClick:()=>{ee(!0)},disabled:!pe||!Le})}),(0,w.jsx)(V.A,{tooltip:(0,c.t)("Reload List"),children:(0,w.jsx)(m.$nd,{id:"refresh-objects-list",label:(0,c.t)("Refresh"),icon:(0,w.jsx)(m.fNY,{}),variant:"regular",onClick:()=>{S?t((0,d.SK)(!0)):(t((0,d.A3)()),t((0,d.Yw)(!0)))},disabled:!W&&(!(0,_._)(ge,[l.OV.S3_LIST_BUCKET,l.OV.S3_ALL_LIST_BUCKET])||f)})}),(0,w.jsx)("input",{type:"file",multiple:!0,accept:$e||void 0,onChange:Je,style:{display:"none"},ref:ke}),(0,w.jsx)("input",{type:"file",multiple:!0,onChange:Je,style:{display:"none"},ref:Ae}),(0,w.jsx)(D,{bucketName:ge,uploadPath:Fe,uploadFileFunction:e=>{ke&&ke.current&&ke.current.click(),e()},uploadFolderFunction:e=>{Ae&&Ae.current&&Ae.current.click(),e()}})]}),bottomBorder:!1})}),(0,w.jsxs)("div",{id:"object-list-wrapper",...He({style:{...Qe}}),children:[(0,w.jsx)("input",{...Ye()}),(0,w.jsxs)(m.azJ,{withBorders:!0,sx:{display:"flex",borderTop:0,padding:0,"& .hideListOnSmall":{"@media (max-width: 799px)":{display:"none"}}},children:[S?(0,w.jsx)(s.Fragment,{children:null!==I&&(0,w.jsx)(ce,{internalPaths:I,bucketName:ge})}):(0,w.jsx)(_.R,{scopes:[l.OV.S3_LIST_BUCKET,l.OV.S3_ALL_LIST_BUCKET],resource:ge,errorProps:{disabled:!0},children:(0,w.jsxs)(m.xA9,{item:!0,xs:12,sx:{width:"100%",position:"relative","&.detailsOpen":{"@media (max-width: 799px)":{display:"none"}}},className:E?"detailsOpen":"",children:[!W&&(0,w.jsx)(m.xA9,{item:!0,xs:12,sx:{padding:"12px 14px 5px"},children:(0,w.jsx)(k,{bucketName:ge,internalPaths:Te,additionalOptions:!pe||f?null:(0,w.jsx)(m.Sc0,{name:"deleted_objects",id:"showDeletedObjects",value:"deleted_on",label:(0,c.t)("Show deleted objects"),onChange:()=>{t((0,d.A3)()),t((0,d.lA)(!y)),Xe(!0)},checked:y,sx:{marginLeft:5,"@media (max-width: 600px)":{marginLeft:0,flexDirection:"row"}}}),hidePathButton:!1})}),(0,w.jsx)(je,{})]})}),!W&&(0,w.jsx)(_.R,{scopes:[l.OV.S3_LIST_BUCKET,l.OV.S3_ALL_LIST_BUCKET],resource:ge,errorProps:{disabled:!0},children:(0,w.jsxs)(L,{open:E,closePanel:()=>{Xe(!1)},className:""+(S?"hideListOnSmall":""),children:[Ue.length>0&&(0,w.jsx)(m.Smc,{items:nt,title:(0,c.t)("Selected Objects:")}),null!==I&&(0,w.jsx)(te,{internalPaths:I,bucketName:ge,onClosePanel:Xe,versioningInfo:z})]})})]})]})]})]})};var Te=n(8218);const Ee=e=>{let{marginRight:t,marginTop:s}=e,i=n(3498);const r=(0,o.d4)((e=>e.system.overrideStyles)),a=i((null===r||void 0===r?void 0:r.backgroundColor)||"#fff").getBrightness()<=128;return(0,w.jsx)(m.xA9,{sx:{"& svg":{width:105,marginRight:t,marginTop:s,fill:a?"#fff":"#081C42"}},children:(0,w.jsx)(m.xul,{})})};var Ie=n(8793),ke=n(9707),Ae=n(8617);const Ne=e=>{let{bucketName:t}=e;const n=(0,a.j)(),i=(0,o.d4)(pe.s$),r=(0,o.d4)((e=>e.objectBrowser.versionsMode)),h=(0,o.d4)((e=>e.objectBrowser.versionedFile)),u=(0,o.d4)((e=>e.objectBrowser.searchVersions)),x=!(null===i||void 0===i||!i.includes("object-browser-only")),p=(0,w.jsx)(s.Fragment,{children:r?(0,w.jsx)(s.Fragment,{children:(0,w.jsx)(ge,{placeholder:`Start typing to filter versions of ${h}`,onChange:e=>{n((0,d.aj)(e))},value:u})}):(0,w.jsx)(_.R,{scopes:[l.OV.S3_LIST_BUCKET,l.OV.S3_ALL_LIST_BUCKET],resource:t,errorProps:{disabled:!0},children:(0,w.jsx)(be,{})})});return(0,s.useEffect)((()=>{n((0,O.ph)("object_browser"))}),[]),(0,w.jsx)(s.Fragment,{children:x?(0,w.jsxs)(m.xA9,{container:!0,sx:{padding:"20px 32px 0"},children:[(0,w.jsx)(m.xA9,{children:(0,w.jsx)(Ee,{marginRight:30,marginTop:10})}),(0,w.jsxs)(m.xA9,{item:!0,xs:!0,sx:{display:"flex",gap:10},children:[p,(0,w.jsx)(ke.A,{})]})]}):(0,w.jsx)(Ie.A,{label:(0,c.t)("Object Browser"),actions:(0,w.jsx)(s.Fragment,{children:(0,w.jsx)(Ae.A,{})}),middleComponent:p})})},Be=()=>{const e=(0,a.j)(),t=(0,i.g)(),n=(0,i.zy)(),c=(0,o.d4)((e=>e.objectBrowser.loadingVersioning)),h=(0,o.d4)((e=>e.objectBrowser.rewind.rewindEnabled)),u=(0,o.d4)((e=>e.objectBrowser.rewind.dateToRewind)),m=(0,o.d4)((e=>e.objectBrowser.showDeleted)),x=(0,o.d4)((e=>e.objectBrowser.requestInProgress)),p=(0,o.d4)((e=>e.objectBrowser.reloadObjectsList)),j=(0,o.d4)((e=>e.objectBrowser.simplePath)),g=(0,o.d4)((e=>e.system.anonymousMode)),b=(0,o.d4)((e=>e.objectBrowser.selectedBucket)),f=(0,o.d4)((e=>e.objectBrowser.records)),v=t.bucketName||"",S=n.pathname.split(`/browser/${encodeURIComponent(v)}/`),_=2===S.length?decodeURIComponent(S[1]):"",y=(0,s.useCallback)((t=>{let n=(new Date).toISOString();null!==u&&h&&(n=u);e({type:"socket/OBRequest",payload:{bucketName:v,path:t,rewindMode:h||m,date:n}})}),[v,m,u,h,e]),O=(0,s.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e((0,d.cQ)({status:!1}));let n=_;_.endsWith("/")||""===_||(n=`${_.split("/").slice(0,-1).join("/")}/`),"/"===n&&(n=""),(n!==j||v!==b||t)&&(e((0,d.u)(!0)),y(n))}),[_,e,j,b,v,y]);(0,s.useEffect)((()=>()=>{e({type:"socket/OBCancelLast"})}),[e]),(0,s.useEffect)((()=>{e((0,d.vn)(!0)),_.endsWith("/")||""===_?(e((0,d.TO)(!1)),e((0,d.A7)(null)),e((0,d.Qy)(!0))):(e((0,d.oe)(!0)),e((0,d.TO)(!0)),e((0,d.SK)(!0)),e((0,d.A7)(_||"")))}),[v,_,u,h,e]),(0,s.useEffect)((()=>{O(!1)}),[O]),(0,s.useEffect)((()=>{p&&0===f.length&&!x&&O(!0)}),[p,f,x,O]);const C=(0,Te.A)(v,[l.OV.S3_LIST_BUCKET,l.OV.S3_ALL_LIST_BUCKET])||g;return(0,s.useEffect)((()=>{c&&!g&&(C?r.F.buckets.getBucketVersioning(v).then((t=>{e((0,d.AP)(t.data)),e((0,d.vn)(!1))})).catch((t=>{console.error("Error Getting Object Versioning Status: ",t.error.detailedMessage),e((0,d.vn)(!1))})):(e((0,d.vn)(!1)),e((0,d.A3)())))}),[v,c,e,C,g]),(0,w.jsxs)(s.Fragment,{children:[!g&&(0,w.jsx)(Ne,{bucketName:v}),(0,w.jsx)(Ce,{})]})}},718:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>_});var s=n(4978),o=n(5043),i=n(2166),r=n(9923),a=n(1476),l=n.n(a),d=n(4141),c=n(28),h=n(579);const u=e=>{let{id:t,label:n,maxSeconds:i,entity:a,onChange:l}=e;const d=Math.floor(i/86400),u=Math.floor(i%86400/3600),m=Math.floor(i%3600/60),[x,p]=(0,o.useState)(0),[j,g]=(0,o.useState)(0),[b,f]=(0,o.useState)(0),[v,S]=(0,o.useState)(!0),[_,w]=(0,o.useState)(null);(0,o.useEffect)((()=>{p(d),g(u),f(m)}),[d,u,m]),(0,o.useEffect)((()=>{var e,t,n;isNaN(j)||isNaN(x)||isNaN(b)||w((e=x,t=j,n=b,c.c9.now().plus({hours:t+24*e,minutes:n}).toISO()))}),[x,j,b]),(0,o.useEffect)((()=>{if(v&&_){const e=c.c9.fromISO(_).toFormat("yyyy-MM-dd HH:mm:ss");l(e.split(" ").join("T"),!0)}else l("0000-00-00",!1)}),[_,l,v]),(0,o.useEffect)((()=>{let e=!0;(x<0||x>7||x>d||isNaN(x))&&(e=!1),(j<0||j>23||isNaN(j))&&(e=!1),(b<0||b>59||isNaN(b))&&(e=!1),x===d&&(j>u&&(e=!1),j===u&&b>m&&(e=!1)),x<=0&&j<=0&&b<=0&&(e=!1),S(e)}),[_,d,u,m,l,x,j,b]);const y={"& .textBoxContainer":{minWidth:0},"& input":{textAlign:"center",paddingRight:10,paddingLeft:10,width:40}};return(0,h.jsxs)(r.azJ,{className:"inputItem",children:[(0,h.jsx)(r.azJ,{sx:{display:"flex",alignItems:"center",marginBottom:5},children:(0,h.jsx)(r.l1Y,{htmlFor:t,children:n})}),(0,h.jsxs)(r.azJ,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-evenly",gap:10,"& .reverseInput":{flexFlow:"row-reverse","& > label":{fontWeight:400,marginLeft:15,marginRight:25}}},children:[(0,h.jsx)(r.azJ,{children:(0,h.jsx)(r.cl_,{id:t,className:(0,s.t)("reverseInput removeArrows"),type:"number",min:"0",max:"7",label:(0,s.t)("Days"),name:t,onChange:e=>{p(parseInt(e.target.value))},value:x.toString(),sx:y,noLabelMinWidth:!0})}),(0,h.jsx)(r.azJ,{children:(0,h.jsx)(r.cl_,{id:t,className:(0,s.t)("reverseInput removeArrows"),type:"number",min:"0",max:"23",label:(0,s.t)("Hours"),name:t,onChange:e=>{g(parseInt(e.target.value))},value:j.toString(),sx:y,noLabelMinWidth:!0})}),(0,h.jsx)(r.azJ,{children:(0,h.jsx)(r.cl_,{id:t,className:(0,s.t)("reverseInput removeArrows"),type:"number",min:"0",max:"59",label:(0,s.t)("Minutes"),name:t,onChange:e=>{f(parseInt(e.target.value))},value:b.toString(),sx:y,noLabelMinWidth:!0})})]}),(0,h.jsx)(r.azJ,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",marginTop:25,marginLeft:10,marginBottom:15,"& .validityText":{fontSize:14,marginTop:15,display:"flex",alignItems:"center",justifyContent:"center","@media (max-width: 900px)":{flexFlow:"column"},"& > .min-icon":{color:"#5E5E5E",width:15,height:15,marginRight:10}},"& .validTill":{fontWeight:"bold",marginLeft:15},"& .invalidDurationText":{marginTop:15,display:"flex",color:"red",fontSize:11}},children:v&&_?(0,h.jsxs)("div",{className:"validityText",children:[(0,h.jsx)(r.qYV,{}),(0,h.jsxs)("div",{children:[a,(0,s.t)("will be available until:")]})," ",(0,h.jsx)("div",{className:"validTill",children:c.c9.fromISO(_).toFormat("MM/dd/yyyy HH:mm:ss ZZZZ")})]}):(0,h.jsx)("div",{className:"invalidDurationText",children:(0,s.t)("Please select a valid duration.")})})]})};var m=n(6483),x=n(4159),p=n(3635),j=n(6629),g=n(3518),b=n(1708),f=n(6035),v=n(3950),S=n.n(v);const _=e=>{let{open:t,closeModalAndRefresh:n,bucketName:a,dataObject:c}=e;const v=(0,p.j)(),_=(0,i.d4)(x.Rq),w=(0,i.d4)(f.yL),[y,O]=(0,o.useState)(""),[C,T]=(0,o.useState)(!0),[E,I]=(0,o.useState)(!1),[k,A]=(0,o.useState)(""),[N,B]=(0,o.useState)(!0),[F,$]=(0,o.useState)("null"),V=S()(((e,t)=>{B(t),t?A(e):(A(""),O(""))}),300);return(0,o.useEffect)((()=>{v((0,b.Ex)())}),[v]),(0,o.useEffect)((()=>{if(void 0===c.version_id)return _?(j.F.buckets.listObjects(a,{prefix:c.name||"",with_versions:_}).then((e=>{const t=(e.data.objects||[]).find((e=>e.is_latest));$(t?`${t.version_id}`:"null")})).catch((e=>{v((0,x.Dy)((0,g.S)(e.error)))})),void T(!1)):($("null"),void T(!1));$(c.version_id||"null"),T(!1)}),[a,c,_,v]),(0,o.useEffect)((()=>{if(N&&!C){I(!0),O("");const e=new Date(`${k}`),t=new Date,n=Math.ceil((e.getTime()-t.getTime())/1e3);n>0&&j.F.buckets.shareObject(a,{prefix:c.name||"",version_id:F,expires:""!==k?`${n}s`:""}).then((e=>{O(e.data),I(!1)})).catch((e=>{v((0,x.Dy)((0,g.S)(e.error))),O(""),I(!1)}))}}),[c,k,a,N,O,v,_,C,F]),(0,h.jsx)(o.Fragment,{children:(0,h.jsxs)(d.A,{title:(0,s.t)("Share File"),titleIcon:(0,h.jsx)(r.liv,{style:{fill:"#4CCB92"}}),modalOpen:t,onClose:()=>{n()},children:[C&&(0,h.jsx)(r.xA9,{item:!0,xs:12,children:(0,h.jsx)(r.z21,{})}),!C&&(0,h.jsxs)(o.Fragment,{children:[(0,h.jsx)(r.xA9,{item:!0,xs:12,sx:{fontSize:14,fontWeight:400},children:(0,h.jsx)(r.m_M,{placement:"right",tooltip:(0,h.jsxs)("span",{children:[(0,s.t)("You can reset your session by logging out and logging back in to the web UI."),(0,h.jsx)("br",{})," ",(0,h.jsx)("br",{}),(0,s.t)("You can increase the maximum configuration time by setting the MINIO_STS_DURATION environment variable on all your nodes."),(0,h.jsx)("br",{})," ",(0,h.jsx)("br",{}),(0,s.t)("You can use"),(0,h.jsx)("b",{children:(0,s.t)("mc share")}),(0,s.t)("as an alternative to this UI, where the session length does not limit the URL validity.")]}),children:(0,h.jsxs)("span",{children:[(0,s.t)("The following URL lets you share this object without requiring a login."),(0,h.jsx)("br",{}),(0,s.t)("The URL expires automatically at the earlier of your configured time ("),(0,m.K7)(w),(0,s.t)(") or the expiration of your current web session.")]})})}),(0,h.jsx)("br",{}),(0,h.jsx)(r.xA9,{item:!0,xs:12,children:(0,h.jsx)(u,{id:"date",label:(0,s.t)("Active for"),maxSeconds:w,onChange:V,entity:"Link"})}),(0,h.jsx)(r.xA9,{item:!0,xs:12,sx:{marginBottom:10},children:(0,h.jsx)(r.EmB,{actionButton:(0,h.jsx)(l(),{text:y,children:(0,h.jsx)(r.$nd,{id:"copy-path",variant:"regular",onClick:()=>{v((0,x.h0)("Share URL Copied to clipboard"))},disabled:""===y||E,style:{width:"28px",height:"28px",padding:"0px"},icon:(0,h.jsx)(r.TdU,{})})}),children:y})})]})]})})}},7524:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var s=n(5043),o=n(4141),i=n(4978),r=n(9923),a=n(3097),l=n.n(a),d=n(3445),c=n(6629),h=n(9355),u=n(7806),m=n(6584),x=n(579);h.EA.workerSrc="./scripts/pdf.worker.min.mjs";const p=e=>{let{path:t,loading:n,onLoad:o,downloadFile:a}=e;const[l,d]=(0,s.useState)(!1),[c,h]=(0,s.useState)(0);if(!t)return null;const p=c>5?5:c,j=Array.from(Array(p).keys());return(0,x.jsxs)(s.Fragment,{children:[l&&0===c&&(0,x.jsx)(r.Wei,{variant:"error",title:(0,i.t)("Error"),message:(0,x.jsxs)(s.Fragment,{children:[(0,i.t)("File preview couldn't be displayed, Please try Download instead."),(0,x.jsx)(r.azJ,{sx:{display:"flex",justifyContent:"center",marginTop:12},children:(0,x.jsx)(r.$nd,{id:"download-preview",onClick:a,variant:"callAction",children:(0,i.t)("Download File")})})]}),sx:{marginBottom:10}}),!n&&!l&&(0,x.jsx)(r.Wei,{variant:"warning",title:(0,i.t)("File Preview"),message:(0,x.jsxs)(s.Fragment,{children:[(0,i.t)("This is a File Preview for the first"),j.length,(0,i.t)("pages of the document, if you wish to work with the full document please download instead."),(0,x.jsx)(r.azJ,{sx:{display:"flex",justifyContent:"center",marginTop:12},children:(0,x.jsx)(r.$nd,{id:"download-preview",onClick:a,variant:"callAction",children:(0,i.t)("Download File")})})]}),sx:{marginBottom:10}}),!l&&(0,x.jsx)(r.azJ,{sx:{overflowY:"auto","& .react-pdf__Page__canvas":{margin:"0 auto",backgroundColor:"transparent"}},children:(0,x.jsx)(u.A,{file:t,onLoadSuccess:e=>{let{_pdfInfo:t}=e;h(t.numPages||0),d(!1),o()},onLoadError:e=>{d(!0),o(),console.error(e)},children:j.map((e=>(0,x.jsx)(m.A,{pageNumber:e+1,renderAnnotationLayer:!1,renderTextLayer:!1,renderForms:!1},`render-page-${e}`)))})})]})};var j=n(8245),g=n(3635);const b=e=>{let{bucketName:t,actualInfo:n,isFullscreen:o=!1}=e;const a=(0,g.j)(),[h,u]=(0,s.useState)(!0),[m,b]=(0,s.useState)(null),[f,v]=(0,s.useState)(!1),S=(null===n||void 0===n?void 0:n.name)||"",_=(0,s.useCallback)((()=>{f||c.F.buckets.getObjectMetadata(t,{prefix:S,versionID:n.version_id||""}).then((e=>{let t=l()(e.data,"objectMetadata",{});v(!0),b(t)})).catch((e=>{console.error("Error Getting Metadata Status: ",e,null===e||void 0===e?void 0:e.detailedError),v(!0)}))}),[t,S,f,n.version_id]);(0,s.useEffect)((()=>{t&&S&&_()}),[t,S,_]);let w="";if(n){let e=document.baseURI.replace(window.location.origin,"");w=`${window.location.origin}${e}api/v1/buckets/${encodeURIComponent(t)}/objects/download?preview=true&prefix=${encodeURIComponent(n.name||"")}`,n.version_id&&(w=w.concat(`&version_id=${n.version_id}`))}let y=(0,d.IZ)(m,S);const O=()=>{u(!1)};return(0,x.jsxs)(s.Fragment,{children:["none"!==y&&h&&(0,x.jsx)(r.xA9,{item:!0,xs:12,children:(0,x.jsx)(r.z21,{})}),f?(0,x.jsxs)(r.azJ,{sx:{textAlign:"center","& .iframeContainer":{border:"0px",flex:"1 1 auto",width:"100%",height:250,backgroundColor:"transparent",borderRadius:5,"&.image":{height:500},"&.audio":{height:150},"&.video":{height:350},"&.fullHeight":{height:"calc(100vh - 185px)"}},"& .iframeBase":{backgroundColor:"#fff"},"& .iframeHidden":{display:"none"}},children:["video"===y&&(0,x.jsx)("video",{style:{width:"auto",height:"auto",maxWidth:"calc(100vw - 100px)",maxHeight:"calc(100vh - 200px)"},autoPlay:!0,controls:!0,muted:!1,playsInline:!0,onPlay:O,children:(0,x.jsx)("source",{src:w,type:"video/mp4"})}),"audio"===y&&(0,x.jsx)("audio",{style:{width:"100%",height:"auto"},autoPlay:!0,controls:!0,muted:!1,playsInline:!0,onPlay:O,children:(0,x.jsx)("source",{src:w,type:"audio/mpeg"})}),"image"===y&&(0,x.jsx)("img",{style:{width:"auto",height:"auto",maxWidth:"100vw",maxHeight:"100vh"},src:w,alt:"preview",onLoad:O}),"pdf"===y&&(0,x.jsx)(s.Fragment,{children:(0,x.jsx)(p,{path:w,onLoad:O,loading:h,downloadFile:()=>{(0,j._)(a,t,S,n)}})}),"none"===y&&(0,x.jsx)("div",{children:(0,x.jsx)(r.Wei,{message:" File couldn't be previewed using file extension or mime type. Please try Download instead",title:(0,i.t)("Preview unavailable"),sx:{margin:"15px 0"}})}),"none"!==y&&"video"!==y&&"audio"!==y&&"image"!==y&&"pdf"!==y&&(0,x.jsx)("div",{className:"iframeBase "+(h?"iframeHidden":""),children:(0,x.jsx)("iframe",{src:w,title:(0,i.t)("File Preview"),allowTransparency:!0,className:`iframeContainer ${o?"fullHeight":y}`,onLoad:O,children:(0,i.t)("File couldn't be loaded. Please try Download instead")})})]}):null]})},f=e=>{let{open:t,bucketName:n,actualInfo:i,onClosePreview:a}=e;return(0,x.jsx)(s.Fragment,{children:(0,x.jsx)(o.A,{modalOpen:t,title:`Preview - ${null===i||void 0===i?void 0:i.name}`,onClose:a,wideLimit:!1,titleIcon:(0,x.jsx)(r.jG,{}),children:(0,x.jsx)(b,{bucketName:n,actualInfo:i})})})}},7403:(e,t,n)=>{"use strict";n.d(t,{U:()=>s});const s={modalButtonBar:{marginTop:15,display:"flex",alignItems:"center",justifyContent:"flex-end",gap:10},modalFormScrollable:{maxHeight:"calc(100vh - 300px)",overflowY:"auto",paddingTop:10}}},5448:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var s=n(5043),o=n(649);const i=(e,t)=>{const[n,i]=(0,s.useState)(!1);return[n,(n,s,r,a)=>{i(!0),o.A.invoke(n,s,r,a).then((t=>{i(!1),e(t)})).catch((e=>{i(!1),t(e)}))}]}},8661:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});n(5043);var s=n(9923),o=n(579);const i=e=>{let{isOpen:t=!1,onClose:n,onCancel:i,onConfirm:r,title:a="",isLoading:l,confirmationContent:d,cancelText:c="Cancel",confirmText:h="Confirm",confirmButtonProps:u,cancelButtonProps:m,titleIcon:x=null,confirmationButtonSimple:p=!1}=e;return(0,o.jsxs)(s.ngX,{title:a,titleIcon:x,onClose:n,open:t,customMaxWidth:510,children:[(0,o.jsx)(s.azJ,{children:d}),(0,o.jsxs)(s.azJ,{sx:{display:"flex",justifyContent:"flex-end",gap:10,marginTop:20},children:[(0,o.jsx)(s.$nd,{onClick:i||n,disabled:l,type:"button",...m,variant:"regular",id:"confirm-cancel",label:c}),(0,o.jsx)(s.$nd,{id:"confirm-ok",onClick:r,label:h,disabled:l,variant:"secondary",...u})]})]})}},1708:(e,t,n)=>{"use strict";n.d(t,{Ex:()=>p,HS:()=>u,mS:()=>m,op:()=>h,oz:()=>x});var s=n(907),o=n(6483),i=n(7414),r=n(3445),a=n(6035),l=n(4159),d=n(28),c=n(6629);const h=(0,s.zD)("objectBrowser/downloadSelected",(async(e,t)=>{let{getState:n,rejectWithValue:s,dispatch:c}=t;const h=n(),u=t=>{const n=encodeURIComponent(`${e}-${t.name}-${(new Date).getTime()}-${Math.random()}`),s=(0,i.E0)(8),o=(0,r.RG)(e,t.name,t.version_id,t.size,null,s,(e=>{c((0,a.DW)({instanceID:n,progress:e}))}),(()=>{c((0,a.rx)(n))}),(e=>{c((0,a.iL)({instanceID:n,msg:e}))}),(()=>{c((0,a.Dm)(n))}),(()=>{c((0,l.Hk)("File download will be handled directly by the browser."))}));(0,i.FP)(s,o),c((0,a.cP)({ID:s,bucketName:e,done:!1,instanceID:n,percentage:0,prefix:t.name,type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""}))};if(0!==h.objectBrowser.selectedObjects.length){let t=[];const n=e=>h.objectBrowser.selectedObjects.includes(e.name);if(t=h.objectBrowser.records.filter(n),1===t.length){if(t[0].name.length>200&&(0,o.oK)().toLowerCase().includes("win"))return void c((0,a.Ew)(t[0]));u(t[0])}else if(1===t.length)u(t[0]);else if(t.length>1){const n=`${d.c9.now().toFormat("LL-dd-yyyy-HH-mm-ss")}_files_list.zip`,s=t.reduce(((e,t)=>{const n=null===t||void 0===t?void 0:t.delete_flag;return t&&!n?e.push(t.name):console.log(`Skipping ${null===t||void 0===t?void 0:t.name} from download.`),e}),[]);return void await(0,r.Fj)(e,s,n)}}})),u=(0,s.zD)("objectBrowser/openPreview",(async(e,t)=>{let{getState:n,rejectWithValue:s,dispatch:o}=t;const i=n();if(1===i.objectBrowser.selectedObjects.length){let e;const t=e=>i.objectBrowser.selectedObjects.includes(e.name);e=i.objectBrowser.records.find(t),e&&(o((0,a.go)(e)),o((0,a.xE)(!0)))}})),m=(0,s.zD)("objectBrowser/openShare",(async(e,t)=>{let{getState:n,rejectWithValue:s,dispatch:o}=t;const i=n();if(1===i.objectBrowser.selectedObjects.length){let e;const t=e=>i.objectBrowser.selectedObjects.includes(e.name);e=i.objectBrowser.records.find(t),e&&(o((0,a.go)(e)),o((0,a.Lf)(!0)))}})),x=(0,s.zD)("objectBrowser/openAnonymousAccess",(async(e,t)=>{let{getState:n,dispatch:s}=t;const o=n();1===o.objectBrowser.selectedObjects.length&&o.objectBrowser.selectedObjects[0].endsWith("/")&&s((0,a.I8)(!0))})),p=(0,s.zD)("objectBrowser/maxShareLinkExpTime",(async(e,t)=>{let{rejectWithValue:n,dispatch:s}=t;return c.F.buckets.getMaxShareLinkExp().then((e=>{s((0,a.QV)(e.data.exp))})).catch((async e=>n(e.error)))}))},8245:(e,t,n)=>{"use strict";n.d(t,{_:()=>l});var s=n(6483),o=n(7414),i=n(3445),r=n(6035),a=n(4159);const l=(e,t,n,l)=>{var d;const c=encodeURIComponent(`${t}-${l.name}-${(new Date).getTime()}-${Math.random()}`),h=(0,s.oK)().toLowerCase().includes("win");if(((null===(d=l.name)||void 0===d?void 0:d.length)||0)>200&&h)return void e((0,r.Jl)(!0));const u=(0,o.E0)(8),m=(0,i.RG)(t,n,l.version_id,l.size||0,null,u,(t=>{e((0,r.DW)({instanceID:c,progress:t}))}),(()=>{e((0,r.rx)(c))}),(t=>{e((0,r.iL)({instanceID:c,msg:t}))}),(()=>{e((0,r.Dm)(c))}),(()=>{e((0,a.Hk)("File download will be handled directly by the browser."))}));(0,o.FP)(u,m),e((0,r.cP)({ID:u,bucketName:t,done:!1,instanceID:c,percentage:0,prefix:l.name||"",type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""}))}},2634:()=>{}}]);
//# sourceMappingURL=88.6d11bddf.chunk.js.map