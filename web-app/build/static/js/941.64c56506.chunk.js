"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[941],{5941:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p});var n=t(4978),o=t(5043),r=t(5448),i=t(8661),l=t(9923),a=t(4159),d=t(3635),c=t(7938),u=t(9161),b=t(2166),h=t(6629),v=t(579);const p=e=>{let{closeDeleteModalAndRefresh:s,deleteOpen:t,selectedBucket:p,selectedObjects:j,versioning:g}=e;const x=(0,d.j)(),f=()=>s(!0),[m,C]=(0,r.A)(f,(e=>x((0,a.C9)(e)))),[y,O]=(0,o.useState)(!1),[_,k]=(0,o.useState)(!1),w=(0,b.d4)((e=>e.objectBrowser.retentionConfig)),T=(0,c._)([p],[u.OV.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===w||void 0===w?void 0:w.mode);if(!j)return null;const A="Enabled"===(null===g||void 0===g?void 0:g.status)||"Suspended"===(null===g||void 0===g?void 0:g.status);return(0,v.jsx)(i.A,{title:(0,n.t)("Delete Objects"),confirmText:"Delete",isOpen:t,titleIcon:(0,v.jsx)(l.xWY,{}),isLoading:m,onConfirm:()=>{let e=[];for(let s=0;s<j.length;s++)j[s].endsWith("/")?e.push({path:j[s],versionID:"",recursive:!0}):e.push({path:j[s],versionID:"",recursive:!1});if(e)if(1===j.length){const e=j[0];h.F.buckets.deleteObject(p,{prefix:e,all_versions:y,bypass:_,recursive:e.endsWith("/")}).then(f).catch((e=>{x((0,a.C9)({errorMessage:`Could not delete object. ${e.statusText}. ${w?"Please check retention mode and if object is WORM protected.":""}`,detailedError:""}))}))}else C("POST",`/api/v1/buckets/${p}/delete-objects?all_versions=${y}${_?"&bypass=true":""}`,e)},onClose:()=>s(!1),confirmationContent:(0,v.jsxs)(o.Fragment,{children:[(0,n.t)("Are you sure you want to delete the selected"),j.length," ",(0,n.t)("objects?")," ",A&&(0,v.jsxs)(o.Fragment,{children:[(0,v.jsx)("br",{}),(0,v.jsx)("br",{}),(0,v.jsx)(l.dOG,{label:(0,n.t)("Delete All Versions"),indicatorLabels:["Yes","No"],checked:y,value:"delete_versions",id:"delete-versions",name:"delete-versions",onChange:e=>{O(!y)},description:""}),T&&y&&(0,v.jsx)(o.Fragment,{children:(0,v.jsx)("div",{style:{marginTop:10},children:(0,v.jsx)(l.dOG,{label:(0,n.t)("Bypass Governance Mode"),indicatorLabels:["Yes","No"],checked:_,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:e=>{k(!_)},description:""})})}),y&&(0,v.jsxs)(o.Fragment,{children:[(0,v.jsxs)("div",{style:{marginTop:10,border:"#c83b51 1px solid",borderRadius:3,padding:5,backgroundColor:"#c83b5120",color:"#c83b51"},children:[(0,n.t)("This will remove the objects as well as all of their versions,"),(0,v.jsx)("br",{}),(0,n.t)("This action is irreversible.")]}),(0,v.jsx)("br",{}),(0,n.t)("Are you sure you want to continue?")]})]})]})})}}}]);
//# sourceMappingURL=941.64c56506.chunk.js.map